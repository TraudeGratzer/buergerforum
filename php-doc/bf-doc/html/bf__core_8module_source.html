<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>BF: D:/custom/bf_core/bf_core.module Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('bf__core_8module_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">bf_core.module</div>  </div>
</div><!--header-->
<div class="contents">
<a href="bf__core_8module.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00008"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ada0bf1f2957377496975f58bb522abe5">    8</a></span>&#160;define(<span class="stringliteral">&#39;INJECTOR_PAGES_NOTLISTED&#39;</span>, 0);</div>
<div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="bf__core_8module.html#addcc0fe17567b9c22db76a8d92d1ee57">    9</a></span>&#160;define(<span class="stringliteral">&#39;INJECTOR_PAGES_LISTED&#39;</span>, 1);</div>
<div class="line"><a name="l00010"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a1835084aa249a366d1b7e476ba8d44d4">   10</a></span>&#160;define(<span class="stringliteral">&#39;OTHER_WORDLIMITER_FIELDS&#39;</span>,serialize(array(</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  <span class="stringliteral">&#39;motivation&#39;</span>,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <span class="stringliteral">&#39;details&#39;</span>,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  <span class="stringliteral">&#39;pro_contra&#39;</span>,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  <span class="stringliteral">&#39;implementation&#39;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;)));</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;module_load_include(<span class="stringliteral">&#39;inc&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;includes/bf_poll&#39;</span>);</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;module_load_include(<span class="stringliteral">&#39;inc&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;views/handlers/views_handler_field_translate_role&#39;</span>);</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;module_load_include(<span class="stringliteral">&#39;inc&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;views/handlers/views_handler_filter_translate_role&#39;</span>);</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;module_load_include(<span class="stringliteral">&#39;inc&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;views/handlers/views_argument_field_translate_role_rid&#39;</span>);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;module_load_include(<span class="stringliteral">&#39;inc&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;bf_core.main_menu_overrides&#39;</span>);</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a4f15db142a3678b5e4ad4a6918f4e951">   26</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a4f15db142a3678b5e4ad4a6918f4e951">bf_core_owlcarousel_settings_alter</a>(&amp;$settings, $instance) {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordflow">if</span> (is_array($instance) &amp;&amp; !user_is_logged_in()) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">if</span> (!$settings[<span class="stringliteral">&#39;items&#39;</span>]) {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      $instance = variable_get(<span class="stringliteral">&#39;owlcarousel_settings_default&#39;</span>, <span class="stringliteral">&#39;owlcarousel_settings_slides&#39;</span>);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      <span class="comment">// Load carousel settings from the instance id.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;      $settings = _owlcarousel_return_carousel_instance_settings($instance);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  }</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="bf__core_8module.html#adcaea6890cc48077e1ab76fab78854e9">   39</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#adcaea6890cc48077e1ab76fab78854e9">bf_core_ctools_plugin_directory</a>($owner, $plugin_type) {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordflow">if</span> ($owner == <span class="stringliteral">&#39;ctools&#39;</span> &amp;&amp; $plugin_type == <span class="stringliteral">&#39;content_types&#39;</span>) {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&#39;plugins/content_types&#39;</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  }</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a4b15fc4f38458e8849aef78c059f1e62">   48</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a4b15fc4f38458e8849aef78c059f1e62">bf_core_js_alter</a>(&amp;$javascript) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// Removes the js that hides the summary field in node add form.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  unset($javascript[<span class="stringliteral">&#39;modules/field/modules/text/text.js&#39;</span>]);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a35851d924f9ef2cf159e65e8a091a478">   56</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a35851d924f9ef2cf159e65e8a091a478">bf_core_process_rate_template_thumbs_up</a>(&amp;$variables) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// Get count of votes.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  $query = db_select(<span class="stringliteral">&#39;votingapi_vote&#39;</span>, <span class="stringliteral">&#39;vote&#39;</span>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;vote.entity_id&#39;</span>, $variables[<span class="stringliteral">&#39;content_id&#39;</span>]);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  $query-&gt;addExpression(<span class="stringliteral">&#39;COUNT(*)&#39;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  $count = $query-&gt;execute()-&gt;fetchField();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">//Get type of node</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  $query = db_select(<span class="stringliteral">&#39;node&#39;</span>, <span class="charliteral">&#39;n&#39;</span>)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;n.nid&#39;</span>, $variables[<span class="stringliteral">&#39;content_id&#39;</span>]);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  $query-&gt;addField(<span class="charliteral">&#39;n&#39;</span>, <span class="stringliteral">&#39;type&#39;</span>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  $type = $query-&gt;execute()-&gt;fetchField();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (empty($count)) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    $count = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  $submitted_users = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span> (!user_is_anonymous()) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// Get user vote.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    $user = user_uid_optional_load();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    $query = db_select(<span class="stringliteral">&#39;votingapi_vote&#39;</span>, <span class="stringliteral">&#39;vote&#39;</span>)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;vote.entity_id&#39;</span>, $variables[<span class="stringliteral">&#39;content_id&#39;</span>])</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;vote.uid&#39;</span>, $user-&gt;uid);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    $query-&gt;addField(<span class="stringliteral">&#39;vote&#39;</span>, <span class="stringliteral">&#39;vote_id&#39;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    $user_vote = $query-&gt;execute()-&gt;fetchField();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> ($count &gt; 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="comment">// Get users of vote</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      $query = db_select(<span class="stringliteral">&#39;votingapi_vote&#39;</span>, <span class="stringliteral">&#39;vote&#39;</span>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      $query-&gt;join(<span class="stringliteral">&#39;field_data_field_displayed_name&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>, <span class="stringliteral">&#39;user.entity_id=vote.uid&#39;</span>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      $query-&gt;condition(<span class="stringliteral">&#39;vote.entity_id&#39;</span>, $variables[<span class="stringliteral">&#39;content_id&#39;</span>]);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      $query-&gt;addField(<span class="stringliteral">&#39;vote&#39;</span>, <span class="stringliteral">&#39;uid&#39;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      $query-&gt;addField(<span class="stringliteral">&#39;user&#39;</span>, <span class="stringliteral">&#39;field_displayed_name_value&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      $query-&gt;orderBy(<span class="stringliteral">&#39;timestamp&#39;</span>, <span class="stringliteral">&#39;DESC&#39;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      $query-&gt;range(0, 3);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      $users_vote = $query-&gt;execute()-&gt;fetchAllKeyed();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      $submitted_users = t(<span class="stringliteral">&#39;@count x signed by:&#39;</span>, array(<span class="stringliteral">&#39;@count&#39;</span> =&gt; $count));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="keywordflow">foreach</span> ($users_vote as $uid =&gt; $name) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        $submitted_users .= <span class="charliteral">&#39; &#39;</span> . l($name, <span class="stringliteral">&#39;user/&#39;</span> . $uid) . <span class="charliteral">&#39;,&#39;</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      $submitted_users = substr($submitted_users, 0, -1);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> ($count &gt; 3) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        $submitted_users .= <span class="charliteral">&#39; &#39;</span> . t(<span class="stringliteral">&#39;and @count others&#39;</span>, array(<span class="stringliteral">&#39;@count&#39;</span> =&gt; $count - 3));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    $up_text = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> ($type == <span class="stringliteral">&#39;info_article&#39;</span>) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordflow">if</span> (empty($user_vote)) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        $up_text = t(<span class="stringliteral">&#39;Recommend this article&#39;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        $up_text = t(<span class="stringliteral">&#39;Unrecommend this article&#39;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    elseif ($type == <span class="stringliteral">&#39;proposal&#39;</span>) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <span class="keywordflow">if</span> (empty($user_vote)) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        $up_text = t(<span class="stringliteral">&#39;Submitting proposal&#39;</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        $up_text = t(<span class="stringliteral">&#39;Unsubmitting proposal&#39;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (empty($variables[<span class="stringliteral">&#39;links&#39;</span>][0][<span class="stringliteral">&#39;href&#39;</span>])) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      $variables[<span class="stringliteral">&#39;up_button&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      $variables[<span class="stringliteral">&#39;up_button&#39;</span>] = theme(<span class="stringliteral">&#39;rate_button&#39;</span>, array(</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="stringliteral">&#39;text&#39;</span>  =&gt; $up_text,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="stringliteral">&#39;href&#39;</span>  =&gt; $variables[<span class="stringliteral">&#39;links&#39;</span>][0][<span class="stringliteral">&#39;href&#39;</span>],</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="stringliteral">&#39;class&#39;</span> =&gt; <span class="stringliteral">&#39;rate-recommend-btn btn&#39;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      ));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    $variables[<span class="stringliteral">&#39;up_button&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> ($count &gt; 0) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      $submitted_users = t(<span class="stringliteral">&#39;@count x signed&#39;</span>, array(<span class="stringliteral">&#39;@count&#39;</span> =&gt; $count));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  $variables[<span class="stringliteral">&#39;info&#39;</span>] = $count;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> ($type == <span class="stringliteral">&#39;proposal&#39;</span>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    $variables[<span class="stringliteral">&#39;info&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    $variables[<span class="stringliteral">&#39;display_options&#39;</span>][<span class="stringliteral">&#39;description&#39;</span>] = $submitted_users;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  elseif ($type == <span class="stringliteral">&#39;info_article&#39;</span>) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    $variables[<span class="stringliteral">&#39;info&#39;</span>] .= <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a42dd4449910d80a96c5d16d66208f603">  153</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a42dd4449910d80a96c5d16d66208f603">bf_core_block_info</a>() {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  $blocks[<span class="stringliteral">&#39;user_badge&#39;</span>] = array(</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="stringliteral">&#39;info&#39;</span>  =&gt; t(<span class="stringliteral">&#39;User Badge&#39;</span>),</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="stringliteral">&#39;cache&#39;</span> =&gt; DRUPAL_CACHE_PER_USER,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  );</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordflow">return</span> $blocks;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a968a1ada95db37df7ba107117f52f255">  164</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a968a1ada95db37df7ba107117f52f255">bf_core_block_view</a>($delta = <span class="stringliteral">&#39;&#39;</span>) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  $block = array();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">switch</span> ($delta) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&#39;user_badge&#39;</span>:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      $block[<span class="stringliteral">&#39;subject&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      $block[<span class="stringliteral">&#39;content&#39;</span>] = theme(<span class="stringliteral">&#39;user_badge&#39;</span>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">case</span> <span class="stringliteral">&#39;counter&#39;</span>:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      $block[<span class="stringliteral">&#39;subject&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      $block[<span class="stringliteral">&#39;content&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">return</span> $block;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a15bdf02c52eda35f32567fe2f64cc90f">  184</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a15bdf02c52eda35f32567fe2f64cc90f">bf_core_theme</a>() {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="stringliteral">&#39;user_badge&#39;</span>                                               =&gt; array(</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="stringliteral">&#39;template&#39;</span> =&gt; <span class="stringliteral">&#39;user_badge&#39;</span>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    ),</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="stringliteral">&#39;search_form&#39;</span>                                              =&gt; array(</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="stringliteral">&#39;template&#39;</span>       =&gt; <span class="stringliteral">&#39;search_form&#39;</span>,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="stringliteral">&#39;render element&#39;</span> =&gt; <span class="stringliteral">&#39;form&#39;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    ),</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="stringliteral">&#39;views_view_field__info_articles__page_3__field_task_type&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="stringliteral">&#39;variables&#39;</span> =&gt; array(<span class="stringliteral">&#39;view&#39;</span> =&gt; NULL, <span class="stringliteral">&#39;options&#39;</span> =&gt; NULL, <span class="stringliteral">&#39;row&#39;</span> =&gt; NULL),</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="stringliteral">&#39;template&#39;</span>  =&gt; <span class="stringliteral">&#39;views-view-field--info-articles--page-3--field-task-type&#39;</span>,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="stringliteral">&#39;base hook&#39;</span> =&gt; <span class="stringliteral">&#39;views_view_fields&#39;</span>,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="stringliteral">&#39;path&#39;</span>      =&gt; drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/view/templates/content-view&#39;</span>,</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    ),</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="stringliteral">&#39;views_view_field__info_articles__page_4__field_task_type&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="stringliteral">&#39;variables&#39;</span> =&gt; array(<span class="stringliteral">&#39;view&#39;</span> =&gt; NULL, <span class="stringliteral">&#39;options&#39;</span> =&gt; NULL, <span class="stringliteral">&#39;row&#39;</span> =&gt; NULL),</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="stringliteral">&#39;template&#39;</span>  =&gt; <span class="stringliteral">&#39;views-view-field--info-articles--page-4--field-task-type&#39;</span>,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="stringliteral">&#39;base hook&#39;</span> =&gt; <span class="stringliteral">&#39;views_view_fields&#39;</span>,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="stringliteral">&#39;path&#39;</span>      =&gt; drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/view/templates/content-view&#39;</span>,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    ),</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aaba40d02886d88f57d596c6259bb3be2">  208</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aaba40d02886d88f57d596c6259bb3be2">bf_core_preprocess_search_form</a>(&amp;$variables) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  $variables[<span class="stringliteral">&#39;search&#39;</span>] = array();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  $hidden = array();</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">// Provide variables named after form keys so themers can print each element independently.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">foreach</span> (element_children($variables[<span class="stringliteral">&#39;form&#39;</span>]) as $key) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    $type = isset($variables[<span class="stringliteral">&#39;form&#39;</span>][$key][<span class="stringliteral">&#39;#type&#39;</span>]) ? $variables[<span class="stringliteral">&#39;form&#39;</span>][$key][<span class="stringliteral">&#39;#type&#39;</span>] : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> ($type == <span class="stringliteral">&#39;hidden&#39;</span> || $type == <span class="stringliteral">&#39;token&#39;</span>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      $hidden[] = drupal_render($variables[<span class="stringliteral">&#39;form&#39;</span>][$key]);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      $variables[<span class="stringliteral">&#39;search&#39;</span>][$key] = drupal_render($variables[<span class="stringliteral">&#39;form&#39;</span>][$key]);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="comment">// Hidden form elements have no value to themers. No need for separation.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  $variables[<span class="stringliteral">&#39;search&#39;</span>][<span class="stringliteral">&#39;hidden&#39;</span>] = implode($hidden);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// Collect all form elements to make it easier to print the whole form.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  $variables[<span class="stringliteral">&#39;search_form&#39;</span>] = implode($variables[<span class="stringliteral">&#39;search&#39;</span>]);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a5680746980f87e12d9c9301ddeec0db0">  231</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a5680746980f87e12d9c9301ddeec0db0">bf_core_preprocess_user_badge</a>(&amp;$vars) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  global $user;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  ctools_add_js(<span class="stringliteral">&#39;dropbutton&#39;</span>, <span class="stringliteral">&#39;ctools&#39;</span>, <span class="stringliteral">&#39;js&#39;</span>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span> ($user-&gt;uid) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    $user = user_load($user-&gt;uid);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    $vars = array_merge($vars, <a class="code" href="bf__core_8module.html#aa715a290dc9cf125d0e2d18f00e4d5f1">bf_core_build_user_details</a>($user));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    $vars[<span class="stringliteral">&#39;login&#39;</span>] = url(<span class="stringliteral">&#39;user/login&#39;</span>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  $vars[<span class="stringliteral">&#39;btn_class&#39;</span>] = variable_get(<span class="stringliteral">&#39;toolbar_style_btn_class&#39;</span>, 0) ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;btn-inverse&#39;</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aa715a290dc9cf125d0e2d18f00e4d5f1">  253</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aa715a290dc9cf125d0e2d18f00e4d5f1">bf_core_build_user_details</a>($user, $image_style = <span class="stringliteral">&#39;userpic30&#39;</span>) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  $details = array();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  $details[<span class="stringliteral">&#39;user&#39;</span>] = $user;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  $details[<span class="stringliteral">&#39;realname&#39;</span>] = <a class="code" href="bf__core_8module.html#a47b4ca2bec6094393620199eae5a7f90">bf_core_display_name</a>($user);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  $details[<span class="stringliteral">&#39;name&#39;</span>] = $user-&gt;name;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  $details[<span class="stringliteral">&#39;picture&#39;</span>] = <a class="code" href="bf__core_8module.html#a480a139fdf1c1e4d3ed66310a097e265">bf_core_users_picture</a>($user, $image_style);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">//Build out links.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  $details[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;dashboard&#39;</span>] = <span class="stringliteral">&#39;user/&#39;</span> . $user-&gt;uid . <span class="stringliteral">&#39;/view&#39;</span>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  $details[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;edit_profile&#39;</span>] = <span class="stringliteral">&#39;user/&#39;</span> . $user-&gt;uid . <span class="stringliteral">&#39;/edit&#39;</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  $details[<span class="stringliteral">&#39;links&#39;</span>][<span class="stringliteral">&#39;logout&#39;</span>] = <span class="stringliteral">&#39;user/logout&#39;</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">return</span> $details;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a480a139fdf1c1e4d3ed66310a097e265">  276</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a480a139fdf1c1e4d3ed66310a097e265">bf_core_users_picture</a>($user = NULL, $image_style = <span class="stringliteral">&#39;userpic&#39;</span>, $url = FALSE,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                               $size_default = array(<span class="stringliteral">&#39;width&#39;</span> =&gt; 30, <span class="stringliteral">&#39;height&#39;</span> =&gt; 30)) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">if</span> (isset($user) &amp;&amp; !empty($user-&gt;picture)) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="user__badge_8tpl_8php.html#abb12f8c31dba99f68efccffe9434082c">$picture</a> = $user-&gt;picture;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="bf__image__fields_8tpl_8php.html#ad1dd99428259c243b107829ddc9beea0">$image</a> = array(</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="stringliteral">&#39;style_name&#39;</span> =&gt; $image_style,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="stringliteral">&#39;path&#39;</span>       =&gt; <a class="code" href="user__badge_8tpl_8php.html#abb12f8c31dba99f68efccffe9434082c">$picture</a>-&gt;uri,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="stringliteral">&#39;alt&#39;</span>        =&gt; t(<span class="stringliteral">&#39;Your profile picture&#39;</span>),</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> ($url) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> image_style_url($image_style, <a class="code" href="user__badge_8tpl_8php.html#abb12f8c31dba99f68efccffe9434082c">$picture</a>-&gt;uri);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">return</span> theme(<span class="stringliteral">&#39;image_style&#39;</span>, <a class="code" href="bf__image__fields_8tpl_8php.html#ad1dd99428259c243b107829ddc9beea0">$image</a>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="bf__image__fields_8tpl_8php.html#ad1dd99428259c243b107829ddc9beea0">$image</a> = array(</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="stringliteral">&#39;style_name&#39;</span> =&gt; $image_style,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="stringliteral">&#39;path&#39;</span>       =&gt; image_style_url($image_style, <span class="stringliteral">&#39;public://default_profile.gif&#39;</span>),</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="stringliteral">&#39;width&#39;</span>      =&gt; $size_default[<span class="stringliteral">&#39;width&#39;</span>],</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="stringliteral">&#39;height&#39;</span>     =&gt; $size_default[<span class="stringliteral">&#39;height&#39;</span>],</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="stringliteral">&#39;alt&#39;</span>        =&gt; t(<span class="stringliteral">&#39;Your profile picture&#39;</span>),</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    );</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Image styles only supported for images in /files dir</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// so for now, ignore the image style.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> ($url) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">return</span> drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/images/pic-user.gif&#39;</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> theme(<span class="stringliteral">&#39;image&#39;</span>, <a class="code" href="bf__image__fields_8tpl_8php.html#ad1dd99428259c243b107829ddc9beea0">$image</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a47b4ca2bec6094393620199eae5a7f90">  319</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a47b4ca2bec6094393620199eae5a7f90">bf_core_display_name</a>($user) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (isset($user-&gt;field_displayed_name) &amp;&amp; isset($user-&gt;field_displayed_name[LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>])) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> $user-&gt;field_displayed_name[LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> $user-&gt;field_first_name[LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39; &#39;</span> .</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      $user-&gt;field_last_name[LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ae560750f0d0dd3bdfa45f196072c687d">  332</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ae560750f0d0dd3bdfa45f196072c687d">bf_core_form_user_register_form_alter</a>(&amp;$form, $form_state, $form_id) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_form_user_profile_form_submit&#39;</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a7f09118da430f1818eb45e9831586b9d">  339</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a7f09118da430f1818eb45e9831586b9d">bf_core_form_user_profile_form_alter</a>(&amp;$form, $form_state, $form_id) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_form_user_profile_form_validate&#39;</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_form_user_profile_form_submit&#39;</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a848b1975007fd423887e27ed76cd6da7">  347</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a848b1975007fd423887e27ed76cd6da7">bf_core_form_user_profile_form_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  $values = $form_state[<span class="stringliteral">&#39;values&#39;</span>];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (empty($values[<span class="stringliteral">&#39;field_displayed_name&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>])) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    $display_name = $values[<span class="stringliteral">&#39;field_first_name&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] . <span class="charliteral">&#39; &#39;</span> .</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      $values[<span class="stringliteral">&#39;field_last_name&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;field_displayed_name&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] = $display_name;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ada9ec93bb4c4ea2a83f11d918a43c77c">  360</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ada9ec93bb4c4ea2a83f11d918a43c77c">bf_core_form_user_profile_form_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="comment">// Added redirect in front pages.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="bf__access_8module.html#ac525a8975d48269f9344b59b1062f2c6">bf_access_admin_menu_access_check</a>() &amp;&amp; $form[<span class="stringliteral">&#39;#user&#39;</span>]-&gt;uid) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    drupal_goto(url(<span class="stringliteral">&#39;user/&#39;</span> . $form[<span class="stringliteral">&#39;#user&#39;</span>]-&gt;uid,array(<span class="stringliteral">&#39;absolute&#39;</span> =&gt; TRUE)));</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a9ef8079930b84edf85e3e47f3d421c06">  372</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a9ef8079930b84edf85e3e47f3d421c06">bf_core_login_redirect</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  drupal_goto(<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a0e8b1f6bd32d88429bed566b55c14e62">  379</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a0e8b1f6bd32d88429bed566b55c14e62">bf_core_path_update</a>($path) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> ($path[<span class="stringliteral">&#39;language&#39;</span>] != <span class="stringliteral">&#39;en&#39;</span>) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    $path[<span class="stringliteral">&#39;language&#39;</span>] = LANGUAGE_NONE;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    $updated = db_update(<span class="stringliteral">&#39;url_alias&#39;</span>)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      -&gt;fields(array(</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="stringliteral">&#39;language&#39;</span> =&gt; LANGUAGE_NONE,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      ))</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;pid&#39;</span>, $path[<span class="stringliteral">&#39;pid&#39;</span>], <span class="charliteral">&#39;=&#39;</span>)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      -&gt;execute();</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a5cb68e8c642647752c816a769f73ebd6">  396</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a5cb68e8c642647752c816a769f73ebd6">bf_core_form_views_exposed_form_alter</a>(&amp;$form, $form_state, $form_id) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordflow">if</span> ($form[<span class="stringliteral">&#39;#id&#39;</span>] == <span class="stringliteral">&#39;views-exposed-form-users-page&#39;</span> || $form[<span class="stringliteral">&#39;#id&#39;</span>] == <span class="stringliteral">&#39;views-exposed-form-bf-members-block&#39;</span>) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    $form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][0] = <span class="stringliteral">&#39;Editor&#39;</span>;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;field_task_type_value_1&#39;</span>])) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">foreach</span> ($form[<span class="stringliteral">&#39;field_task_type_value_1&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>] as $task_type_key =&gt; $task_type) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      $form[<span class="stringliteral">&#39;field_task_type_value_1&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$task_type_key] = t($form[<span class="stringliteral">&#39;field_task_type_value_1&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$task_type_key]);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;committee&#39;</span>]) || isset($form[<span class="stringliteral">&#39;field_committee_target_id&#39;</span>])) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// Committees</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    $query = db_select(<span class="stringliteral">&#39;node&#39;</span>, <span class="charliteral">&#39;n&#39;</span>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, <span class="stringliteral">&#39;committee&#39;</span>)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      -&gt;condition(<span class="stringliteral">&#39;n.status&#39;</span>, 1);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    $query-&gt;addField(<span class="charliteral">&#39;n&#39;</span>, <span class="stringliteral">&#39;nid&#39;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    $query-&gt;addField(<span class="charliteral">&#39;n&#39;</span>, <span class="stringliteral">&#39;title&#39;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    $committees = $query-&gt;execute()-&gt;fetchAllKeyed();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    $committees[<span class="stringliteral">&#39;&#39;</span>] = t(<span class="stringliteral">&#39;- Any -&#39;</span>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    asort($committees);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;committee&#39;</span>])) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    $form[<span class="stringliteral">&#39;committee&#39;</span>] = array(</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="stringliteral">&#39;#options&#39;</span>       =&gt; $committees,</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    );</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="comment">//for change commitee in popup select editor</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;field_committee_target_id&#39;</span>])) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    $form[<span class="stringliteral">&#39;field_committee_target_id&#39;</span>] = array(</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="stringliteral">&#39;#options&#39;</span>       =&gt; $committees,</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    );</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span> (!empty($form[<span class="stringliteral">&#39;rid&#39;</span>])) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    $roles = $form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>];</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> ($form[<span class="stringliteral">&#39;#id&#39;</span>] == <span class="stringliteral">&#39;views-exposed-form-bf-members-block&#39;</span>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">foreach</span> ($roles as $id =&gt; &amp;$role) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> ($form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id] == <span class="stringliteral">&#39;Admin&#39;</span> || $form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id] == <span class="stringliteral">&#39;Manager&#39;</span>) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          unset($form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id]);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          $form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id] = <a class="code" href="bf__core_8module.html#aa7f8304495217cd7cfaaf10b4acdd863">bf_core_get_gender_role</a>($form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id], <span class="stringliteral">&#39;neutral&#39;</span>, TRUE);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">foreach</span> ($roles as $id =&gt; $role) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        $form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id] = t($form[<span class="stringliteral">&#39;rid&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][$id]);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    $form[<span class="stringliteral">&#39;#info&#39;</span>][<span class="stringliteral">&#39;filter-rid&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>] = t($form[<span class="stringliteral">&#39;#info&#39;</span>][<span class="stringliteral">&#39;filter-rid&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  $form[<span class="stringliteral">&#39;reset&#39;</span>][<span class="stringliteral">&#39;#attributes&#39;</span>] = array(</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="stringliteral">&#39;onclick&#39;</span> =&gt; <span class="stringliteral">&#39;var selects = document.getElementsByClassName(&quot;form-select&quot;)</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="stringliteral">for (var i=0; i&lt;selects.length; i++)selects[i].value = &quot;all&quot;;this.submit()&#39;</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  );</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> ($form_state[<span class="stringliteral">&#39;view&#39;</span>]-&gt;name == <span class="stringliteral">&#39;bf_members&#39;</span>) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    $form[<span class="stringliteral">&#39;#action&#39;</span>] = <span class="stringliteral">&#39;teilnehmeruebersicht&#39;</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (!empty($form[<span class="stringliteral">&#39;sort_by&#39;</span>])) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    $form[<span class="stringliteral">&#39;sort_by&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>] = t($form[<span class="stringliteral">&#39;sort_by&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>]);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (!empty($form[<span class="stringliteral">&#39;submit&#39;</span>])) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    $form[<span class="stringliteral">&#39;submit&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>] = t($form[<span class="stringliteral">&#39;submit&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>]);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (!empty($form[<span class="stringliteral">&#39;reset&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>])) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    $form[<span class="stringliteral">&#39;reset&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>] = t($form[<span class="stringliteral">&#39;reset&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>]);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordflow">if</span> (!empty($form[<span class="stringliteral">&#39;committee&#39;</span>])) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    $form[<span class="stringliteral">&#39;#info&#39;</span>][<span class="stringliteral">&#39;filter-field_committee_target_id&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>] = t($form[<span class="stringliteral">&#39;#info&#39;</span>][<span class="stringliteral">&#39;filter-field_committee_target_id&#39;</span>][<span class="stringliteral">&#39;label&#39;</span>]);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ad42d51ff11dd6983a7ace58557339f57">  486</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ad42d51ff11dd6983a7ace58557339f57">bf_core_init</a>() {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  global $language;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  $current_path = current_path();</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> (module_exists(<span class="stringliteral">&#39;translation&#39;</span>) &amp;&amp; preg_match(<span class="stringliteral">&#39;/node\/([0-9]+)(\/.+|)$/&#39;</span>, $current_path, $matches)) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">switch</span> (variable_get(<span class="stringliteral">&#39;locale_language_negotiation_url_part&#39;</span>, LOCALE_LANGUAGE_NEGOTIATION_URL_PREFIX)) {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="keywordflow">case</span> LOCALE_LANGUAGE_NEGOTIATION_URL_PREFIX:</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// Check if there&#39;s a translation for the current language of the requested node...</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// $matches[0] is the entire matches path from above</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        $node_translations = translation_path_get_translations($matches[0]);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="comment">// If there is, go to the translation.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (!empty($node_translations[$language-&gt;language]) &amp;&amp; $node_translations[$language-&gt;language] != $matches[0]) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          globalredirect_goto($node_translations[$language-&gt;language]);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  $lang_path = explode(<span class="charliteral">&#39;?&#39;</span>, url(<span class="stringliteral">&#39;sites/all/libraries/socialshareprivacy/socialshareprivacy/lang/&#39;</span>, array(<span class="stringliteral">&#39;query&#39;</span> =&gt; array())));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  $dummy_img = <span class="stringliteral">&#39;sites/all/libraries/socialshareprivacy/socialshareprivacy/socialshareprivacy/images/dummy_facebook_&#39;</span> . $language-&gt;language . <span class="stringliteral">&#39;.png&#39;</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  drupal_add_js(array(</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="stringliteral">&#39;secureshare&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="stringliteral">&#39;secureshare&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="stringliteral">&#39;language&#39;</span>  =&gt; $language-&gt;language,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="stringliteral">&#39;lang_path&#39;</span> =&gt; $lang_path[0],</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="stringliteral">&#39;services&#39;</span>  =&gt; array(</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          <span class="stringliteral">&#39;facebook&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="stringliteral">&#39;dummy_img&#39;</span> =&gt; $dummy_img,</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          )</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        )</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      )</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    )</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  ), <span class="stringliteral">&#39;setting&#39;</span>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// Set default language in site.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  $languages = language_list();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">if</span> (!isset($_GET[<span class="stringliteral">&#39;language&#39;</span>])) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;lang&#39;</span>])) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      $language = $languages[$_SESSION[<span class="stringliteral">&#39;lang&#39;</span>]];</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      $language = $languages[<span class="stringliteral">&#39;de&#39;</span>];</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">if</span> (in_array($_GET[<span class="stringliteral">&#39;language&#39;</span>], array(<span class="stringliteral">&#39;en&#39;</span>, <span class="stringliteral">&#39;de&#39;</span>))) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      $language = $languages[$_GET[<span class="stringliteral">&#39;language&#39;</span>]];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      $_SESSION[<span class="stringliteral">&#39;lang&#39;</span>] = $_GET[<span class="stringliteral">&#39;language&#39;</span>];</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aba766c0e86d820daffdfd4902a1d79a1">  540</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aba766c0e86d820daffdfd4902a1d79a1">bf_core_secureshare_pre_render</a>($element) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  global $language;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> ($language-&gt;language == <span class="stringliteral">&#39;de&#39;</span>) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    $element[<span class="stringliteral">&#39;#secureshare_profile&#39;</span>] = <span class="stringliteral">&#39;Info article de&#39;</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keywordflow">return</span> $element;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aa82a514e42d0a902af819ad9f92c69c5">  551</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aa82a514e42d0a902af819ad9f92c69c5">bf_core_after_build</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  global $language;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  $form[<span class="stringliteral">&#39;path&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  $form[<span class="stringliteral">&#39;site_information&#39;</span>][<span class="stringliteral">&#39;variable_realm_selector_language&#39;</span>] = $form[<span class="stringliteral">&#39;variable_realm_selector_language&#39;</span>];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  $form[<span class="stringliteral">&#39;site_information&#39;</span>][<span class="stringliteral">&#39;variable_realm_selector_language&#39;</span>][<span class="stringliteral">&#39;#weight&#39;</span>] = 5;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  $form[<span class="stringliteral">&#39;variable_realm_selector_language&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_date&#39;</span>][<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>] = t(<span class="stringliteral">&#39;End Date of Phase&#39;</span>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  $translate = i18n_taxonomy_term_get_translation(taxonomy_term_load($form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_name&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>]), $language-&gt;language);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">if</span> ($translate) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_name&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>] = $translate-&gt;tid;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_name&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>] = $translate-&gt;tid;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">return</span> ($form);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="bf__core_8module.html#abb615107c94d9cecf1d6433bf9000d8a">  570</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#abb615107c94d9cecf1d6433bf9000d8a">bf_core_field_edit_after_build</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  hide($form[<span class="stringliteral">&#39;field&#39;</span>][<span class="stringliteral">&#39;translatable&#39;</span>]);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  hide($form[<span class="stringliteral">&#39;instance&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>][<span class="stringliteral">&#39;user_register_form&#39;</span>]);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  hide($form[<span class="stringliteral">&#39;instance&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>][<span class="stringliteral">&#39;token_tree&#39;</span>]);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  hide($form[<span class="stringliteral">&#39;instance&#39;</span>][<span class="stringliteral">&#39;exclude_cv&#39;</span>]);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">return</span> ($form);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a3f4ac92d34437bcb909fd975770c9a07">  579</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a3f4ac92d34437bcb909fd975770c9a07">bf_core_username_alter</a>(&amp;$name, $account) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="comment">// Display the user&#39;s uid instead of name.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (isset($account-&gt;field_displayed_name) &amp;&amp; isset($account-&gt;field_displayed_name[<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;safe_value&#39;</span>])) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    $name = $account-&gt;field_displayed_name[<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;safe_value&#39;</span>];</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a9e6fdd914e3118b549535733e5403ce1">  589</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a9e6fdd914e3118b549535733e5403ce1">bf_core_newsletter_after_build</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  $form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;preview_changes&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordflow">return</span> ($form);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a09225a1306c094350c7ed4f2cdcfd59d">  598</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a09225a1306c094350c7ed4f2cdcfd59d">bf_core_form_alter</a>(&amp;$form, &amp;$form_state, $form_id) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;simplenews_node_form&#39;</span>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    $form[<span class="stringliteral">&#39;#after_build&#39;</span>][] = <span class="stringliteral">&#39;bf_core_newsletter_after_build&#39;</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    $form[<span class="stringliteral">&#39;additional_settings&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;committee_node_form&#39;</span>) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    global $language;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    $lang = <span class="stringliteral">&#39;und&#39;</span>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;body&#39;</span>][$language-&gt;language]) &amp;&amp; isset($form[<span class="stringliteral">&#39;body&#39;</span>][$language-&gt;language][0][<span class="stringliteral">&#39;#entity_type&#39;</span>])) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      $lang = $language-&gt;language;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    elseif (isset($form[<span class="stringliteral">&#39;body&#39;</span>][<span class="stringliteral">&#39;en&#39;</span>][0][<span class="stringliteral">&#39;#entity_type&#39;</span>])) {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      $lang = <span class="stringliteral">&#39;en&#39;</span>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    elseif (isset($form[<span class="stringliteral">&#39;body&#39;</span>][<span class="stringliteral">&#39;de&#39;</span>][0][<span class="stringliteral">&#39;#entity_type&#39;</span>])) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      $lang = <span class="stringliteral">&#39;de&#39;</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    $form[<span class="stringliteral">&#39;body&#39;</span>][$lang][<span class="stringliteral">&#39;#cardinality&#39;</span>] = 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">// $form[&#39;body&#39;][$lang][0][&#39;#type&#39;]=&#39;plain_text&#39;;</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;simplenews_admin_category_form&#39;</span>) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    $form[<span class="stringliteral">&#39;email&#39;</span>][<span class="stringliteral">&#39;receipt&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;system_site_information_settings&#39;</span>) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    global $user;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    $form[<span class="stringliteral">&#39;#after_build&#39;</span>][] = <span class="stringliteral">&#39;bf_core_after_build&#39;</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    $access = $user-&gt;uid == 1 ? TRUE : FALSE;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    $form[<span class="stringliteral">&#39;front_page&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = $access;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    $form[<span class="stringliteral">&#39;error_page&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = $access;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    $form[<span class="stringliteral">&#39;site_information&#39;</span>][<span class="stringliteral">&#39;site_mail&#39;</span>][<span class="stringliteral">&#39;#weight&#39;</span>] = -1;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    $form[<span class="stringliteral">&#39;site_mail&#39;</span>] = $form[<span class="stringliteral">&#39;site_information&#39;</span>][<span class="stringliteral">&#39;site_mail&#39;</span>];</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    $form[<span class="stringliteral">&#39;site_information&#39;</span>][<span class="stringliteral">&#39;site_mail&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">//added logo upload field</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>] = array(</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>        =&gt; <span class="stringliteral">&#39;fieldset&#39;</span>,</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>       =&gt; t(<span class="stringliteral">&#39;Project Logo&#39;</span>),</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span> =&gt; t(<span class="stringliteral">&#39;If toggled on, the following logo will be displayed.&#39;</span>),</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <span class="stringliteral">&#39;#attributes&#39;</span>  =&gt; array(<span class="stringliteral">&#39;class&#39;</span> =&gt; array(<span class="stringliteral">&#39;theme-settings-bottom&#39;</span>)),</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="stringliteral">&#39;#weight&#39;</span>      =&gt; 0</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;default_logo&#39;</span>] = array(</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;checkbox&#39;</span>,</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Use the default logo&#39;</span>),</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; theme_get_setting(<span class="stringliteral">&#39;default_logo&#39;</span>, <span class="stringliteral">&#39;bf_theme&#39;</span>),</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="stringliteral">&#39;#tree&#39;</span>          =&gt; FALSE,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span>   =&gt; t(<span class="stringliteral">&#39;Check here if you want the theme to use the logo supplied with it.&#39;</span>)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>] = array(</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>   =&gt; <span class="stringliteral">&#39;container&#39;</span>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="stringliteral">&#39;#states&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// Hide the logo settings when using the default logo.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="stringliteral">&#39;invisible&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          <span class="stringliteral">&#39;input[name=&quot;default_logo&quot;]&#39;</span> =&gt; array(<span class="stringliteral">&#39;checked&#39;</span> =&gt; TRUE),</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        ),</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      ),</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    );</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>][<span class="stringliteral">&#39;logo_path&#39;</span>] = array(</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;textfield&#39;</span>,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Path to custom logo&#39;</span>),</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span>   =&gt; t(<span class="stringliteral">&#39;The path to the file you would like to use as your logo file instead of the default logo.&#39;</span>),</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; theme_get_setting(<span class="stringliteral">&#39;logo_path&#39;</span>, <span class="stringliteral">&#39;bf_theme&#39;</span>),</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    );</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>][<span class="stringliteral">&#39;logo_upload&#39;</span>] = array(</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>        =&gt; <span class="stringliteral">&#39;file&#39;</span>,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>       =&gt; t(<span class="stringliteral">&#39;Upload logo image&#39;</span>),</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="stringliteral">&#39;#maxlength&#39;</span>   =&gt; 40,</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span> =&gt; t(<span class="stringliteral">&quot;If you don&#39;t have direct file access to the server, use this field to upload your logo.&quot;</span>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">//added second logo upload field</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;second_logo_path&#39;</span>] = array(</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;textfield&#39;</span>,</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Path to second logo&#39;</span>),</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span>   =&gt; t(<span class="stringliteral">&#39;The path to the file you would like to use as your logo file instead of the default logo.&#39;</span>),</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; theme_get_setting(<span class="stringliteral">&#39;second_logo_path&#39;</span>, <span class="stringliteral">&#39;bf_theme&#39;</span>),</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    );</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    $form[<span class="stringliteral">&#39;logo&#39;</span>][<span class="stringliteral">&#39;second_logo_upload&#39;</span>] = array(</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>        =&gt; <span class="stringliteral">&#39;file&#39;</span>,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>       =&gt; t(<span class="stringliteral">&#39;Upload second logo image&#39;</span>),</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <span class="stringliteral">&#39;#maxlength&#39;</span>   =&gt; 40,</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="stringliteral">&#39;#description&#39;</span> =&gt; t(<span class="stringliteral">&quot;If you don&#39;t have direct file access to the server, use this field to upload your logo.&quot;</span>)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    $form[<span class="stringliteral">&#39;limit_proposal_chars&#39;</span>] = array(</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>        =&gt; <span class="stringliteral">&#39;fieldset&#39;</span>,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>       =&gt; t(<span class="stringliteral">&#39;Proposal&#39;</span>),</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="stringliteral">&#39;#attributes&#39;</span>  =&gt; array(<span class="stringliteral">&#39;class&#39;</span> =&gt; array(<span class="stringliteral">&#39;theme-settings-bottom&#39;</span>)),</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="stringliteral">&#39;#weight&#39;</span>      =&gt; 10</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    $form[<span class="stringliteral">&#39;limit_proposal_chars&#39;</span>][<span class="stringliteral">&#39;intro&#39;</span>] = array(</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;textfield&#39;</span>,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Length restriction for intro (maximum number of characters)&#39;</span>),</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_intro&#39;</span>,150),</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    );</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    $form[<span class="stringliteral">&#39;limit_proposal_chars&#39;</span>][<span class="stringliteral">&#39;other&#39;</span>] = array(</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;textfield&#39;</span>,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Length restriction for each proposal section (maximum number of characters)&#39;</span>),</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_other&#39;</span>,150),</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_logo_settings_validate&#39;</span>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_system_site_information_save_email&#39;</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;nodequeue_arrange_subqueue_form_3&#39;</span>){</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    drupal_set_title(t(<span class="stringliteral">&#39;Sort tasks&#39;</span>));</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    hide($form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;reverse&#39;</span>]);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    hide($form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;shuffle&#39;</span>]);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    hide($form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;clear&#39;</span>]);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">foreach</span> (element_children($form[<span class="stringliteral">&#39;nodes&#39;</span>]) as $element) {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      hide($form[<span class="stringliteral">&#39;nodes&#39;</span>][$element][<span class="stringliteral">&#39;edit&#39;</span>]);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      hide($form[<span class="stringliteral">&#39;nodes&#39;</span>][$element][<span class="stringliteral">&#39;remove&#39;</span>]);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;proposal_node_form&#39;</span> || $form_id == <span class="stringliteral">&#39;bf_pief_field_edit_form&#39;</span>) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    $count_intro = strlen($form[<span class="stringliteral">&#39;field_intro&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;value&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>]);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    $limit_intro_text = variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_intro&#39;</span>,150);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    $limit_other_text = variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_other&#39;</span>,150);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    $form[<span class="stringliteral">&#39;field_intro&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>][<span class="stringliteral">&#39;#description&#39;</span>] = <span class="stringliteral">&quot;&lt;span id=\&quot;count_intro\&quot;&gt;{$count_intro}&lt;/span&gt;&quot;</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="comment">//   t(&#39;!x characters left (Length restricted to @max character)&#39;, array(&#39;!x&#39;=&gt;&quot;&lt;span id=\&quot;count_intro\&quot;&gt;{$count_intro}&lt;/span&gt;&quot;, &#39;@max&#39;=&gt; $limit_intro_text));</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    $form[<span class="stringliteral">&#39;field_intro&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>][<span class="stringliteral">&#39;#attributes&#39;</span>] = array(<span class="stringliteral">&#39;worlimiter&#39;</span> =&gt; $limit_intro_text);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    drupal_add_js(array(</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="stringliteral">&#39;wordlimiter&#39;</span>=&gt;array(</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="stringliteral">&#39;intro&#39;</span> =&gt; $limit_intro_text,</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="stringliteral">&#39;other&#39;</span> =&gt; $limit_other_text,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="stringliteral">&#39;default_intro&#39;</span> =&gt; $count_intro</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      )),<span class="stringliteral">&#39;setting&#39;</span>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    ctools_add_js(<span class="stringliteral">&#39;proposal_wordlimiter&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_validate_proposal_wordlimiter&#39;</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    $other_wordlimiter_fields = unserialize(<a class="code" href="bf__core_8module.html#a1835084aa249a366d1b7e476ba8d44d4">OTHER_WORDLIMITER_FIELDS</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">foreach</span> ($other_wordlimiter_fields as $wordlimiter_field) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      $form[<span class="stringliteral">&#39;field_&#39;</span> . $wordlimiter_field][LANGUAGE_NONE][0][<span class="stringliteral">&#39;#description&#39;</span>] = <span class="stringliteral">&quot;&lt;span class=\&quot;count-worlimiter\&quot; id=\&quot;count_&quot;</span> .</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        $wordlimiter_field .<span class="stringliteral">&quot;\&quot;&gt;{$limit_other_text}&lt;/span&gt;&quot;</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      $form[<span class="stringliteral">&#39;field_&#39;</span> . $wordlimiter_field][LANGUAGE_NONE][0][<span class="stringliteral">&#39;#attributes&#39;</span>] = array(<span class="stringliteral">&#39;worlimiter&#39;</span> =&gt; $limit_other_text);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;user_profile_form&#39;</span>) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    hide($form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>]);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;roles&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>])) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">foreach</span> ($form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;roles&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>] as &amp;$role) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        $role = t($role);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="comment">//edit breadcrumbs</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    $breadcrumb = menu_get_active_breadcrumb();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    $breadcrumb[1] = t(<span class="stringliteral">&#39;Edit profile&#39;</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    drupal_set_breadcrumb($breadcrumb);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    drupal_set_title(t(<span class="stringliteral">&#39;Edit profile&#39;</span>));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    $form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;cancel&#39;</span>][<span class="stringliteral">&#39;#prefix&#39;</span>] = <span class="stringliteral">&#39;&lt;div class=&quot;form-cancel-account-text&quot;&gt;&#39;</span> . t(<span class="stringliteral">&#39;Your account will be removed and all account information deleted. All of your content will be assigned to the Anonymous user. This action cannot be undone.&#39;</span>) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;task_node_form&#39;</span>) {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    unset($form[<span class="stringliteral">&#39;body&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;summary&#39;</span>]);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    $form[<span class="stringliteral">&#39;field_link&#39;</span>][<span class="stringliteral">&#39;#type&#39;</span>] = <span class="stringliteral">&#39;fieldset&#39;</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    $form[<span class="stringliteral">&#39;field_link&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>] = t(<span class="stringliteral">&#39;Link&#39;</span>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    $form[<span class="stringliteral">&#39;field_date_begin&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#title&#39;</span>] = t(<span class="stringliteral">&#39;Start Date&#39;</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    $form[<span class="stringliteral">&#39;field_date&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#title&#39;</span>] = t(<span class="stringliteral">&#39;Due to&#39;</span>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    $form[<span class="stringliteral">&#39;field_date&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#theme_wrappers&#39;</span>] = array();</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    $form[<span class="stringliteral">&#39;field_date_begin&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#theme_wrappers&#39;</span>] = array();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;info_article_node_form&#39;</span>) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    $form[<span class="stringliteral">&#39;field_date_of_publication&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#theme_wrappers&#39;</span>] = array();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    $form[<span class="stringliteral">&#39;field_date_of_publication&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#title&#39;</span>] = t(<span class="stringliteral">&#39;Date of publication&#39;</span>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (empty($form[<span class="stringliteral">&#39;field_date_of_publication&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;#default_value&#39;</span>])) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      $form[<span class="stringliteral">&#39;field_date_of_publication&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>] = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    array_unshift($form[<span class="stringliteral">&#39;#validate&#39;</span>], <span class="stringliteral">&#39;bf_core_info_article_form_validate&#39;</span>);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;advpoll_node_form&#39;</span>) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_cookie_duration&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    $form[<span class="stringliteral">&#39;body&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_behavior&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_mode&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_dates&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_closed&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    unset($form[<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][<span class="stringliteral">&#39;electoral&#39;</span>]);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    unset($form[<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>][<span class="stringliteral">&#39;block&#39;</span>]);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    $form[<span class="stringliteral">&#39;revision_information&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    $form[<span class="stringliteral">&#39;options&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    $form[<span class="stringliteral">&#39;author&#39;</span>][<span class="stringliteral">&#39;#access&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_advpoll_node_form_validate&#39;</span>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    unset($form[<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>][0]);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    hide($form[<span class="stringliteral">&#39;advpoll_options&#39;</span>]);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    $form[<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][<span class="stringliteral">&#39;#checked&#39;</span>] = FALSE;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">//disabled checkbox write-in choice</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">foreach</span> ($form[<span class="stringliteral">&#39;advpoll_choice&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>] as $key =&gt; $choice) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">if</span> (is_numeric($key)) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        $form[<span class="stringliteral">&#39;advpoll_choice&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][$key][<span class="stringliteral">&#39;write_in&#39;</span>][<span class="stringliteral">&#39;#disabled&#39;</span>] = TRUE;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        hide($form[<span class="stringliteral">&#39;advpoll_choice&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][$key][<span class="stringliteral">&#39;write_in&#39;</span>]);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">//advanced poll form</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;advpoll_choice_form&#39;</span>) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    drupal_add_js(array(</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="stringliteral">&#39;advpoll_deletenid&#39;</span> =&gt; array(</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          <span class="stringliteral">&#39;nid&#39;</span>    =&gt; isset($form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid) ? $form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          <span class="stringliteral">&#39;reload&#39;</span> =&gt; TRUE</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        )</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      ),</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="stringliteral">&#39;setting&#39;</span>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    $form[<span class="stringliteral">&#39;submit&#39;</span>][<span class="stringliteral">&#39;#ajax&#39;</span>][<span class="stringliteral">&#39;callback&#39;</span>] = <span class="stringliteral">&#39;poll_view_voting_ajax_submit&#39;</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    $form[<span class="stringliteral">&#39;submit&#39;</span>][<span class="stringliteral">&#39;#ajax&#39;</span>][<span class="stringliteral">&#39;#executes_submit_callback&#39;</span>] = TRUE;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="comment">//poll form</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;poll_view_voting&#39;</span>) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    $form[<span class="stringliteral">&#39;vote&#39;</span>][<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;poll_view_voting_poll_submit&#39;</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;privatemsg_new&#39;</span>) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    $form[<span class="stringliteral">&#39;subject&#39;</span>][<span class="stringliteral">&#39;#required&#39;</span>] = TRUE;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    $form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;cancel&#39;</span>][<span class="stringliteral">&#39;#markup&#39;</span>] = <span class="stringliteral">&#39;&lt;a href=&quot;javascript:void(0)&quot; onclick=&quot;document.getElementById(\&#39;edit-subject\&#39;).value=\&#39;\&#39;;document.getElementById(\&#39;edit-body-value\&#39;).value=\&#39;\&#39;;&quot;</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="stringliteral">    id=&quot;edit-cancel&quot;&gt;&#39;</span> . t(<span class="stringliteral">&#39;Cancel&#39;</span>) . <span class="stringliteral">&#39;&lt;/a&gt;&#39;</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;user_register_form&#39;</span>) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (isset($form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;roles&#39;</span>])) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      $user_roles = $form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;roles&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>];</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keywordflow">foreach</span> ($user_roles as $key =&gt; $user_role) {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        $user_roles[$key] = t($user_role);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      $form[<span class="stringliteral">&#39;account&#39;</span>][<span class="stringliteral">&#39;roles&#39;</span>][<span class="stringliteral">&#39;#options&#39;</span>] = $user_roles;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    $form[<span class="stringliteral">&#39;#theme&#39;</span>] = array(<span class="stringliteral">&#39;bf_user_register_form&#39;</span>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    $form[<span class="stringliteral">&#39;field_sex&#39;</span>][<span class="stringliteral">&#39;#default_value&#39;</span>] = <span class="stringliteral">&#39;Male&#39;</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">if</span> (isset($form_state[<span class="stringliteral">&#39;input&#39;</span>])) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      $form_state[<span class="stringliteral">&#39;values&#39;</span>] = $form_state[<span class="stringliteral">&#39;input&#39;</span>];</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    $form[<span class="stringliteral">&#39;#attached&#39;</span>][<span class="stringliteral">&#39;js&#39;</span>][] = drupal_get_path(<span class="stringliteral">&#39;theme&#39;</span>, <span class="stringliteral">&#39;bf_theme&#39;</span>) . <span class="stringliteral">&#39;/assets/js/register.js&#39;</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;field_ui_field_delete_form&#39;</span>) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> ($form[<span class="stringliteral">&#39;bundle&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>] == <span class="stringliteral">&#39;user&#39;</span>) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_field_delete_form_submit&#39;</span>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      $form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;cancel&#39;</span>][<span class="stringliteral">&#39;#href&#39;</span>] = <span class="stringliteral">&#39;admin/config/system/register-form-settings&#39;</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;field_ui_field_edit_form&#39;</span>) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_field_delete_form_submit&#39;</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    $form[<span class="stringliteral">&#39;actions&#39;</span>][<span class="stringliteral">&#39;cancel&#39;</span>][<span class="stringliteral">&#39;#href&#39;</span>] = <span class="stringliteral">&#39;admin/config/system/register-form-settings&#39;</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    hide($form[<span class="stringliteral">&#39;instance&#39;</span>][<span class="stringliteral">&#39;description&#39;</span>]);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    $form[<span class="stringliteral">&#39;field&#39;</span>][<span class="stringliteral">&#39;settings&#39;</span>][<span class="stringliteral">&#39;allowed_values&#39;</span>][<span class="stringliteral">&#39;#description&#39;</span>] = t(<span class="stringliteral">&#39;Provide text to describe&#39;</span>);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    $form[<span class="stringliteral">&#39;#after_build&#39;</span>][] = <span class="stringliteral">&#39;bf_core_field_edit_after_build&#39;</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;user_login&#39;</span>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    $validators = array(</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="stringliteral">&#39;user_login_name_validate&#39;</span>,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="stringliteral">&#39;user_login_authenticate_validate&#39;</span>,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="stringliteral">&#39;bf_core_user_login_final_validate&#39;</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    );</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    $form[<span class="stringliteral">&#39;#validate&#39;</span>] = $validators;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_login_validate&#39;</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span> ($form[<span class="stringliteral">&#39;#action&#39;</span>] != <span class="stringliteral">&#39;/user&#39;</span>) {</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_login_submit&#39;</span>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="keywordflow">if</span> ($form_id == <span class="stringliteral">&#39;search_form&#39;</span>) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    $options = array(</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="stringliteral">&#39;all&#39;</span>          =&gt; t(<span class="stringliteral">&#39;Full Website&#39;</span>),</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="stringliteral">&#39;proposal&#39;</span>     =&gt; t(<span class="stringliteral">&#39;All Proposals&#39;</span>),</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="stringliteral">&#39;info_article&#39;</span> =&gt; t(<span class="stringliteral">&#39;Info Articles&#39;</span>),</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="stringliteral">&#39;page&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Content Pages&#39;</span>)</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    );</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    $form[<span class="stringliteral">&#39;searchOptions&#39;</span>] = array(</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="stringliteral">&#39;#prefix&#39;</span>        =&gt; <span class="stringliteral">&#39;&lt;button type=&quot;submit&quot; class=&quot;btn submit btn-inverse&quot;&gt;</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="stringliteral">          &lt;i class=&quot;icon-search&quot;&gt;&lt;/i&gt;</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="stringliteral">        &lt;/button&gt;&lt;div class=&quot;btn-group&quot;&gt;&lt;button class=&quot;btn dropdown-toggle btn-inverse&quot; data-toggle=&quot;dropdown&quot;&gt;</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="stringliteral">          &lt;i class=&quot;caret&quot;&gt;&lt;/i&gt;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="stringliteral">        &lt;/button&gt;&lt;div class=&quot;dropdown-menu options&quot;&gt;&#39;</span>,</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;radios&#39;</span>,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; isset($_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>]) ? $_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>] : <span class="stringliteral">&#39;all&#39;</span>,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="stringliteral">&#39;#options&#39;</span>       =&gt; $options,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="stringliteral">&#39;#suffix&#39;</span>        =&gt; <span class="stringliteral">&#39;&lt;/div&gt;&lt;/div&gt;&#39;</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    );</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_search_type_save&#39;</span>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    ctools_add_js(<span class="stringliteral">&#39;toolbar_search&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;js&#39;</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    hide($form[<span class="stringliteral">&#39;actions&#39;</span>]);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="keywordflow">return</span> $form;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ae75bf1152f5d4ce928dd15556584b3df">  896</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ae75bf1152f5d4ce928dd15556584b3df">bf_core_user_login_final_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">if</span> (empty($form_state[<span class="stringliteral">&#39;uid&#39;</span>])) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="comment">// Always register an IP-based failed login event.</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    flood_register_event(<span class="stringliteral">&#39;failed_login_attempt_ip&#39;</span>, variable_get(<span class="stringliteral">&#39;user_failed_login_ip_window&#39;</span>, 3600));</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// Register a per-user failed login event.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (isset($form_state[<span class="stringliteral">&#39;flood_control_user_identifier&#39;</span>])) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      flood_register_event(<span class="stringliteral">&#39;failed_login_attempt_user&#39;</span>, variable_get(<span class="stringliteral">&#39;user_failed_login_user_window&#39;</span>, 21600), $form_state[<span class="stringliteral">&#39;flood_control_user_identifier&#39;</span>]);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">if</span> (isset($form_state[<span class="stringliteral">&#39;flood_control_triggered&#39;</span>])) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">if</span> ($form_state[<span class="stringliteral">&#39;flood_control_triggered&#39;</span>] == <span class="stringliteral">&#39;user&#39;</span>) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        form_set_error(<span class="stringliteral">&#39;name&#39;</span>, format_plural(variable_get(<span class="stringliteral">&#39;user_failed_login_user_limit&#39;</span>, 5), <span class="stringliteral">&#39;Sorry, there has been more than one failed login attempt for this account. It is temporarily blocked. Try again later or &lt;a href=&quot;@url&quot;&gt;request a new password&lt;/a&gt;.&#39;</span>, <span class="stringliteral">&#39;Sorry, there have been more than @count failed login attempts for this account. It is temporarily blocked. Try again later or &lt;a href=&quot;@url&quot;&gt;request a new password&lt;/a&gt;.&#39;</span>, array(<span class="stringliteral">&#39;@url&#39;</span> =&gt; url(<span class="stringliteral">&#39;user/password&#39;</span>))));</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">// We did not find a uid, so the limit is IP-based.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        form_set_error(<span class="stringliteral">&#39;name&#39;</span>, t(<span class="stringliteral">&#39;Sorry, too many failed login attempts from your IP address. This IP address is temporarily blocked. Try again later or &lt;a href=&quot;@url&quot;&gt;request a new password&lt;/a&gt;.&#39;</span>, array(<span class="stringliteral">&#39;@url&#39;</span> =&gt; url(<span class="stringliteral">&#39;user/password&#39;</span>))));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    }</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      form_set_error(<span class="stringliteral">&#39;name&#39;</span>, t(<span class="stringliteral">&#39;Sorry, unrecognized username or password. &lt;a href=&quot;@password&quot;&gt;Have you forgotten your password?&lt;/a&gt;&#39;</span>, array(<span class="stringliteral">&#39;@password&#39;</span> =&gt; url(<span class="stringliteral">&#39;user/password&#39;</span>, array(<span class="stringliteral">&#39;query&#39;</span> =&gt; array(<span class="stringliteral">&#39;name&#39;</span> =&gt; $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>]))))));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      watchdog(<span class="stringliteral">&#39;user&#39;</span>, <span class="stringliteral">&#39;Login attempt failed for %user.&#39;</span>, array(<span class="stringliteral">&#39;%user&#39;</span> =&gt; $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;name&#39;</span>]));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  elseif (isset($form_state[<span class="stringliteral">&#39;flood_control_user_identifier&#39;</span>])) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// Clear past failures for this user so as not to block a user who might</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="comment">// log in and out more than once in an hour.</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    flood_clear_event(<span class="stringliteral">&#39;failed_login_attempt_user&#39;</span>, $form_state[<span class="stringliteral">&#39;flood_control_user_identifier&#39;</span>]);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;}</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ad46f9d1f373692eed11ff2d959d261bc">  929</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ad46f9d1f373692eed11ff2d959d261bc">bf_core_validate_proposal_wordlimiter</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  $values = &amp;$form_state[<span class="stringliteral">&#39;values&#39;</span>];</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  $limit_intro_text = variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_intro&#39;</span>,150);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  $limit_other_text = variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_other&#39;</span>,150);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; <span class="comment">// $intro = strip_tags($values[&#39;field_intro&#39;][LANGUAGE_NONE][0][&#39;value&#39;]);</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  $intro = $values[<span class="stringliteral">&#39;field_intro&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  $values[<span class="stringliteral">&#39;field_intro&#39;</span>][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] = text_summary($intro,<span class="stringliteral">&#39;&#39;</span>,$limit_intro_text);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  $other_wordlimiter_fields = unserialize(<a class="code" href="bf__core_8module.html#a1835084aa249a366d1b7e476ba8d44d4">OTHER_WORDLIMITER_FIELDS</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  $limit_other_text = variable_get(<span class="stringliteral">&#39;bf_limit_proposal_chars_other&#39;</span>,150);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">foreach</span> ($other_wordlimiter_fields as $wordlimiter_field) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    $textRaw = $values[<span class="stringliteral">&#39;field_&#39;</span> . $wordlimiter_field][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    $lenghtRaw = strlen($textRaw);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  $lengthText = strlen(<a class="code" href="proposal__wordlimiter_8js.html#af1ef45944c885a1f1d2126883bda988d">strip_tags</a>($textRaw));</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    $lengthTags = $lenghtRaw - $lengthText;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> ($lenghtRaw &gt; $limit_other_text) {</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      $values[<span class="stringliteral">&#39;field_&#39;</span> . $wordlimiter_field][LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] =  text_summary($textRaw,<span class="stringliteral">&#39;filter_html&#39;</span>,</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        ($limit_other_text + $lengthTags));</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a555cd4f5c278d11afed392fff6ef9e4b">  955</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a555cd4f5c278d11afed392fff6ef9e4b">bf_core_advpoll_node_form_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;  <span class="keywordflow">if</span> (isset($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>]) &amp;&amp;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    is_null($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;value&#39;</span>])</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  ) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;advpoll_options&#39;</span>][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;value&#39;</span>] = 0;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  }</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a493619c6ac78f4ec87a1903163bdd816">  966</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a493619c6ac78f4ec87a1903163bdd816">bf_core_logo_settings_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="comment">// Handle file uploads.</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  $validators = array(<span class="stringliteral">&#39;file_validate_is_image&#39;</span> =&gt; array());</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// Check for a new uploaded logo.</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  $file = file_save_upload(<span class="stringliteral">&#39;logo_upload&#39;</span>, $validators);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  $second_file = file_save_upload(<span class="stringliteral">&#39;second_logo_upload&#39;</span>, $validators, <span class="stringliteral">&#39;public://&#39;</span>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">if</span> (isset($file)) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">// File upload was attempted.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> ($file) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="comment">// Put the temporary file in form_values so we can save it on submit.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;logo_upload&#39;</span>] = $file;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="comment">// File upload failed.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      form_set_error(<span class="stringliteral">&#39;logo_upload&#39;</span>, t(<span class="stringliteral">&#39;The logo could not be uploaded.&#39;</span>));</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">if</span> (isset($second_file)) {</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">// File upload was attempted.</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">if</span> ($second_file) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="comment">// Put the temporary file in form_values so we can save it on submit.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;second_logo_upload&#39;</span>] = $second_file;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="comment">// File upload failed.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      form_set_error(<span class="stringliteral">&#39;second_logo_upload&#39;</span>, t(<span class="stringliteral">&#39;The second logo could not be uploaded.&#39;</span>));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// If the user provided a path for a logo or favicon file, make sure a file</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// exists at that path.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordflow">if</span> ($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;logo_path&#39;</span>]) {</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    $path = _system_theme_settings_validate_path($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;logo_path&#39;</span>]);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (!$path) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      form_set_error(<span class="stringliteral">&#39;logo_path&#39;</span>, t(<span class="stringliteral">&#39;The custom logo path is invalid.&#39;</span>));</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  }</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// If the user provided a path for a logo or favicon file, make sure a file</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// exists at that path.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">if</span> ($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;second_logo_path&#39;</span>]) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    $second_path = _system_theme_settings_validate_path($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;second_logo_path&#39;</span>]);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (!$second_path) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      form_set_error(<span class="stringliteral">&#39;second_logo_path&#39;</span>, t(<span class="stringliteral">&#39;The second logo path is invalid.&#39;</span>));</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div>
<div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ae334cd9278485fbdebc7fe475b1c17e5"> 1018</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ae334cd9278485fbdebc7fe475b1c17e5">bf_core_search_type_save</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  $_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>] = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;searchOptions&#39;</span>];</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="bf__core_8module.html#af1936e03a6f41ded8b081645e9d18470"> 1025</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#af1936e03a6f41ded8b081645e9d18470">bf_core_system_site_information_save_email</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  variable_set(<span class="stringliteral">&#39;site_mail&#39;</span>, $form_state[<span class="stringliteral">&#39;input&#39;</span>][<span class="stringliteral">&#39;site_mail&#39;</span>]);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  form_state_values_clean($form_state);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  $values = $form_state[<span class="stringliteral">&#39;values&#39;</span>];</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">if</span> ($file = $values[<span class="stringliteral">&#39;logo_upload&#39;</span>]) {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    unset($values[<span class="stringliteral">&#39;logo_upload&#39;</span>]);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    $filename = file_unmanaged_copy($file-&gt;uri);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    $values[<span class="stringliteral">&#39;default_logo&#39;</span>] = 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    $values[<span class="stringliteral">&#39;logo_path&#39;</span>] = $filename;</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    $values[<span class="stringliteral">&#39;toggle_logo&#39;</span>] = 1;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="keywordflow">if</span> (!empty($values[<span class="stringliteral">&#39;logo_path&#39;</span>])) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    $values[<span class="stringliteral">&#39;logo_path&#39;</span>] = _system_theme_settings_validate_path($values[<span class="stringliteral">&#39;logo_path&#39;</span>]);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keywordflow">if</span> ($file = $values[<span class="stringliteral">&#39;second_logo_upload&#39;</span>]) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    unset($values[<span class="stringliteral">&#39;second_logo_upload&#39;</span>]);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    $file-&gt;status = FILE_STATUS_PERMANENT;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    file_save($file);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    $filename = file_unmanaged_copy($file-&gt;uri);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    $values[<span class="stringliteral">&#39;second_logo_path&#39;</span>] = $filename;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    variable_set(<span class="stringliteral">&#39;second_logo_path&#39;</span>, $filename);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="keywordflow">if</span> (!empty($values[<span class="stringliteral">&#39;second_logo_path&#39;</span>])) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    $values[<span class="stringliteral">&#39;second_logo_path&#39;</span>] = _system_theme_settings_validate_path($values[<span class="stringliteral">&#39;second_logo_path&#39;</span>]);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// Save settings limit proposal text.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  variable_set(<span class="stringliteral">&#39;bf_limit_proposal_chars_intro&#39;</span>, $values[<span class="stringliteral">&#39;intro&#39;</span>]);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  variable_set(<span class="stringliteral">&#39;bf_limit_proposal_chars_other&#39;</span>, $values[<span class="stringliteral">&#39;other&#39;</span>]);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  variable_set(<span class="stringliteral">&#39;theme_bf_theme_settings&#39;</span>, $values);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aea64e5af597c360ea76b674d40a58dea"> 1062</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aea64e5af597c360ea76b674d40a58dea">bf_core_field_delete_form_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  $form_state[<span class="stringliteral">&#39;redirect&#39;</span>] = <span class="stringliteral">&#39;admin/config/system/register-form-settings&#39;</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;}</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="bf__core_8module.html#afa5f18641afabc035f8bd5e687be32bc"> 1070</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#afa5f18641afabc035f8bd5e687be32bc">bf_core_info_article_form_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;language&#39;</span>] = <span class="stringliteral">&#39;und&#39;</span>;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;}</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div>
<div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a04c5192404da435c966ac8b28f8990dc"> 1077</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a04c5192404da435c966ac8b28f8990dc">bf_core_preprocess_field_multiple_value_form</a>(&amp;$variables) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="keywordflow">if</span> (isset($variables[<span class="stringliteral">&#39;element&#39;</span>][0][<span class="stringliteral">&#39;#field_name&#39;</span>]) &amp;&amp;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    $variables[<span class="stringliteral">&#39;element&#39;</span>][0][<span class="stringliteral">&#39;#field_name&#39;</span>] == <span class="stringliteral">&#39;field_link&#39;</span> &amp;&amp;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    $variables[<span class="stringliteral">&#39;element&#39;</span>][0][<span class="stringliteral">&#39;#entity&#39;</span>]-&gt;type == <span class="stringliteral">&#39;task&#39;</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  ) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    $variables[<span class="stringliteral">&#39;element&#39;</span>][0][<span class="stringliteral">&#39;#title&#39;</span>] = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    $variables[<span class="stringliteral">&#39;element&#39;</span>][0][<span class="stringliteral">&#39;url&#39;</span>][<span class="stringliteral">&#39;#description&#39;</span>] = t(<span class="stringliteral">&#39;Link is automatically filled for the standard task&#39;</span>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;}</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a88c154399c5e6a53410ebdb5e4013423"> 1091</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a88c154399c5e6a53410ebdb5e4013423">bf_core_date_popup_process_alter</a>(&amp;$element, &amp;$form_state, $context) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">if</span> (isset($element[<span class="stringliteral">&#39;#field&#39;</span>]) &amp;&amp; in_array($element[<span class="stringliteral">&#39;#instance&#39;</span>][<span class="stringliteral">&#39;field_name&#39;</span>], array(</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="stringliteral">&#39;field_date&#39;</span>,</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="stringliteral">&#39;field_date_begin&#39;</span>,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="stringliteral">&#39;field_phase_end&#39;</span>,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="stringliteral">&#39;field_date_of_publication&#39;</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  ))</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  ) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    $element[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>] = $context[<span class="stringliteral">&#39;form&#39;</span>][$element[<span class="stringliteral">&#39;#field&#39;</span>][<span class="stringliteral">&#39;field_name&#39;</span>]][<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;#title&#39;</span>];</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">if</span> ($element[<span class="stringliteral">&#39;#name&#39;</span>] == <span class="stringliteral">&#39;&lt;fieldname&gt;&#39;</span>) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    unset($element[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;#description&#39;</span>]);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    unset($element[<span class="stringliteral">&#39;date&#39;</span>][<span class="stringliteral">&#39;#title&#39;</span>]);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a1e18706e69cccbe6143591bdbdc43a17"> 1110</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a1e18706e69cccbe6143591bdbdc43a17">poll_view_voting_ajax_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="bf__core_8module.html#a2523c880c02d049869bc1435a2371b6d">poll_view_voting_submit</a>($form, $form_state);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">return</span> advpoll_form_submit($form, $form_state);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01118"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a2523c880c02d049869bc1435a2371b6d"> 1118</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a2523c880c02d049869bc1435a2371b6d">poll_view_voting_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  $nid = $form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  $data = advpoll_get_form_data($form_state);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keywordflow">if</span> ($data-&gt;choices) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    $count = count($data-&gt;choices);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    $votes = $form[$count][<span class="stringliteral">&#39;#value&#39;</span>];</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">if</span> ($data-&gt;show_results != <span class="stringliteral">&#39;never&#39;</span>) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      drupal_add_js(array(</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;          <span class="stringliteral">&#39;advpoll_nid&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="stringliteral">&#39;nid&#39;</span>    =&gt; isset($form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid) ? $form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid : <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            <span class="stringliteral">&#39;reload&#39;</span> =&gt; TRUE</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;          )</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        ),</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="stringliteral">&#39;setting&#39;</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (isset($nid) &amp;&amp; is_numeric($nid)) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        $node = node_load($nid);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        $image_dir = <span class="stringliteral">&#39;public://images/&#39;</span> . $node-&gt;nid;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <span class="keywordflow">if</span> (!file_prepare_directory($image_dir)) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;          drupal_mkdir($image_dir, NULL, TRUE);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        $sizes = array(<span class="stringliteral">&#39;100&#39;</span>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        $clone_node = clone $node;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">foreach</span> ($sizes as $size) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;          $plot_uri = $image_dir . <span class="stringliteral">&#39;/plot_&#39;</span> . $node-&gt;nid . $size . <span class="charliteral">&#39;_&#39;</span> . $size . <span class="stringliteral">&#39;.png&#39;</span>;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;          $plot_path = drupal_realpath($plot_uri);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;          <a class="code" href="bf__poll_8inc.html#a3d811a0efaef409c305ad0becc6215a0">bf_poll_update_bar</a>($clone_node, $plot_path, $plot_uri, $size, $size, $votes);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a4bc8bf3bd6e7fbd391fa9f5a8c74fc3a"> 1158</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a4bc8bf3bd6e7fbd391fa9f5a8c74fc3a">poll_view_voting_poll_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  $nid = $form_state[<span class="stringliteral">&#39;build_info&#39;</span>][<span class="stringliteral">&#39;args&#39;</span>][0]-&gt;nid;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="keywordflow">if</span> (isset($nid) &amp;&amp; is_numeric($nid)) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    $node = node_load($nid);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    $image_dir = <span class="stringliteral">&#39;public://images/&#39;</span> . $node-&gt;nid;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">if</span> (!file_prepare_directory($image_dir)) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      drupal_mkdir($image_dir, NULL, TRUE);</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    $sizes = array(<span class="stringliteral">&#39;100&#39;</span>, <span class="stringliteral">&#39;300&#39;</span>, <span class="stringliteral">&#39;600&#39;</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">foreach</span> ($sizes as $size) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      $plot_uri = $image_dir . <span class="stringliteral">&#39;/plot_&#39;</span> . $node-&gt;nid . $size . <span class="charliteral">&#39;_&#39;</span> . $size . <span class="stringliteral">&#39;.png&#39;</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      $plot_path = drupal_realpath($plot_uri);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <a class="code" href="bf__poll_8inc.html#afe83293ec9cbbcf10051b37536c89f31">bf_poll_update_poll_bar</a>($node, $plot_path, $plot_uri, $size, $size, $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;choice&#39;</span>]);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    }</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="bf__core_8module.html#abedc1d8990709b5be26d14d092b42b17"> 1180</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#abedc1d8990709b5be26d14d092b42b17">bf_core_check_exist_chart</a>($nid, $size) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  $image_dir = <span class="stringliteral">&#39;public://images/&#39;</span> . $nid;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">if</span> (!file_prepare_directory($image_dir)) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    drupal_mkdir($image_dir, NULL, TRUE);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  $plot_uri = $image_dir . <span class="stringliteral">&#39;/plot_&#39;</span> . $nid . $size . <span class="charliteral">&#39;_&#39;</span> . $size . <span class="stringliteral">&#39;.png&#39;</span>;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  $plot_path = drupal_realpath($plot_uri);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="keywordflow">if</span> (file_exists($plot_path)) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  }</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div>
<div class="line"><a name="l01198"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aafc4a7f126a807ea353f85c91c727efb"> 1198</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aafc4a7f126a807ea353f85c91c727efb">bf_core_login_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  $command = array();</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  $command[] = ctools_ajax_command_redirect(<span class="stringliteral">&#39;&lt;front&gt;&#39;</span>);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  print ajax_render($command);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  exit;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div>
<div class="line"><a name="l01208"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a786236bdf610226f5abbf27017cf57f0"> 1208</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a786236bdf610226f5abbf27017cf57f0">bf_core_login_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;messages&#39;</span>]) &amp;&amp; !count(@$_SESSION[<span class="stringliteral">&#39;messages&#39;</span>][<span class="stringliteral">&#39;error&#39;</span>]) &amp;&amp; !valid_email_address</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  ($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;email&#39;</span>]) &amp;&amp; $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;email&#39;</span>] != <span class="stringliteral">&#39;admin&#39;</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  ) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    form_set_error(<span class="stringliteral">&#39;name&#39;</span>, t(<span class="stringliteral">&#39;Incorrect email address&#39;</span>));</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;}</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div>
<div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d"> 1225</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($committee_target_id, $role = <span class="stringliteral">&#39;Participant&#39;</span>, $invite = FALSE) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  $query = db_select(<span class="stringliteral">&#39;field_data_field_committee&#39;</span>, <span class="charliteral">&#39;f&#39;</span>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;users_roles&#39;</span>, <span class="stringliteral">&#39;ur&#39;</span>, <span class="stringliteral">&#39;f.entity_id = ur.uid&#39;</span>);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;role&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="stringliteral">&#39;ur.rid = r.rid&#39;</span>);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;f.field_committee_target_id&#39;</span>, $committee_target_id);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;f.entity_type&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;r.name&#39;</span>, $role);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="keywordflow">if</span> ($invite) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_invite&#39;</span>, <span class="charliteral">&#39;i&#39;</span>, <span class="stringliteral">&#39;i.entity_id = f.entity_id&#39;</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    $query-&gt;condition(<span class="stringliteral">&#39;i.field_invite_value&#39;</span>, 1);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    $result = $query-&gt;countQuery()</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    $result = $query-&gt;countQuery()</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_invite&#39;</span>, <span class="charliteral">&#39;i&#39;</span>, <span class="stringliteral">&#39;i.entity_id = f.entity_id&#39;</span>);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    $query-&gt;condition(<span class="stringliteral">&#39;i.field_invite_value&#39;</span>, 1);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    $result1 = $query-&gt;countQuery()</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    $result = $result - $result1;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a9a5eede5ea71cc3b88b3d8b8e52beccb"> 1261</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a9a5eede5ea71cc3b88b3d8b8e52beccb">bf_core_places_for_committee</a>() {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span> (count(<a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>())) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    $return = array(</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="stringliteral">&#39;members_all&#39;</span>  =&gt; floor(variable_get(<span class="stringliteral">&#39;bf_count_members_all&#39;</span>, 450) / count(<a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>())),</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="stringliteral">&#39;members_form&#39;</span> =&gt; floor(variable_get(<span class="stringliteral">&#39;bf_count_members_form&#39;</span>,</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        300) / count(<a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>())),</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    );</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  }</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    $return = array(</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="stringliteral">&#39;members_all&#39;</span>  =&gt; 0,</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="stringliteral">&#39;members_form&#39;</span> =&gt; 0,</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    );</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  $return[<span class="stringliteral">&#39;remainder_all&#39;</span>] = variable_get(<span class="stringliteral">&#39;bf_count_members_all&#39;</span>, 450) - ($return[<span class="stringliteral">&#39;members_all&#39;</span>] * count</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  (<a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>()));</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  $return[<span class="stringliteral">&#39;remainder_form&#39;</span>] = variable_get(<span class="stringliteral">&#39;bf_count_members_form&#39;</span>, 300) - ($return[<span class="stringliteral">&#39;members_form&#39;</span>] * count</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  (<a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>()));</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordflow">return</span> $return;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a84903034352a31c393b06c332d3bfee6"> 1289</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a84903034352a31c393b06c332d3bfee6">bf_core_is_free_places_for_committee</a>($committee_target_id) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  $places_for_committe = <a class="code" href="bf__core_8module.html#a9a5eede5ea71cc3b88b3d8b8e52beccb">bf_core_places_for_committee</a>();</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  $countAllComitee = $places_for_committe[<span class="stringliteral">&#39;members_form&#39;</span>];</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  $remainder = $places_for_committe[<span class="stringliteral">&#39;remainder_form&#39;</span>];</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (module_exists(<span class="stringliteral">&#39;bf_invite&#39;</span>)) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (isset($_COOKIE[<span class="stringliteral">&#39;br_ref&#39;</span>]) &amp;&amp; <a class="code" href="bf__invite_8module.html#afeb195878835ecf3fda1649942bfa890">bf_invite_check_code</a>($_COOKIE[<span class="stringliteral">&#39;br_ref&#39;</span>])) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      $countAllComitee = $places_for_committe[<span class="stringliteral">&#39;members_all&#39;</span>];</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      $remainder = $places_for_committe[<span class="stringliteral">&#39;remainder_all&#39;</span>];</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  }</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  $list = <a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>();</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  $membersCount = 0;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">foreach</span> ($list as $comitee) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    $membersCount += <a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($comitee-&gt;nid);</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($committee_target_id) &lt; $countAllComitee) ||</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    $remainder &amp;&amp; (<a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($committee_target_id) &lt;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      $countAllComitee + 1)</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  ) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01321"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a53669d1b5805caaa77df4bb556f231d9"> 1321</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a53669d1b5805caaa77df4bb556f231d9">bf_core_get_free_places_for_committee</a>($committee_target_id, $invite = FALSE) {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  $places_for_committe = <a class="code" href="bf__core_8module.html#a9a5eede5ea71cc3b88b3d8b8e52beccb">bf_core_places_for_committee</a>();</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  $countAllComitee = $places_for_committe[<span class="stringliteral">&#39;members_form&#39;</span>];</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  $countMemberForCommitee = <a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($committee_target_id);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordflow">if</span> (module_exists(<span class="stringliteral">&#39;bf_invite&#39;</span>)) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <span class="keywordflow">if</span> (isset($_COOKIE[<span class="stringliteral">&#39;br_ref&#39;</span>]) &amp;&amp; <a class="code" href="bf__invite_8module.html#afeb195878835ecf3fda1649942bfa890">bf_invite_check_code</a>($_COOKIE[<span class="stringliteral">&#39;br_ref&#39;</span>]) &amp;&amp; <a class="code" href="bf__register__form_8module.html#aa52ecb286339c0fa1a1c6e550e22adb2">bf_register_form_fillinvite_freebase_places</a>($committee_target_id)) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      $countAllComitee = $places_for_committe[<span class="stringliteral">&#39;members_all&#39;</span>] - $places_for_committe[<span class="stringliteral">&#39;members_form&#39;</span>];</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      $countMemberForCommitee = <a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($committee_target_id, TRUE);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">return</span> $countAllComitee - $countMemberForCommitee;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a6b80a06128bdedec80666be3245f28da"> 1340</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a6b80a06128bdedec80666be3245f28da">bf_core_count_members_forum</a>($invite = FALSE) {</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  $membersCount = 0;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  $list = <a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <span class="keywordflow">foreach</span> ($list as $comitee) {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    $membersCount += <a class="code" href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a>($comitee-&gt;nid, <span class="stringliteral">&#39;Participant&#39;</span>, $invite);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  }</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  <span class="keywordflow">return</span> $membersCount;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e"> 1355</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a>($description = FALSE) {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  $query = db_select(<span class="stringliteral">&#39;node&#39;</span>, <span class="charliteral">&#39;n&#39;</span>);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;type&#39;</span>, <span class="stringliteral">&#39;committee&#39;</span>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;status&#39;</span>, 1);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  $query-&gt;fields(<span class="charliteral">&#39;n&#39;</span>, array(<span class="stringliteral">&#39;nid&#39;</span>, <span class="stringliteral">&#39;title&#39;</span>));</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordflow">if</span> ($description) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_body&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="stringliteral">&#39;f.entity_id = n.nid&#39;</span>);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    $query-&gt;fields(<span class="charliteral">&#39;f&#39;</span>, array(<span class="stringliteral">&#39;body_summary&#39;</span>, <span class="stringliteral">&#39;body_value&#39;</span>));</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  }</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  $result = $query</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    -&gt;execute()</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    -&gt;fetchAllAssoc(<span class="stringliteral">&#39;nid&#39;</span>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;}</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ae7b433953d8f4f7ea6636c681bb923e4"> 1376</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ae7b433953d8f4f7ea6636c681bb923e4">bf_core_count_members_with_a_criteria</a>($criteria = <span class="stringliteral">&#39;field_sex&#39;</span>, $value = NULL, $role = <span class="stringliteral">&#39;Participant&#39;</span>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  $query = db_select(<span class="stringliteral">&#39;field_data_&#39;</span> . $criteria, <span class="charliteral">&#39;f&#39;</span>);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;users_roles&#39;</span>, <span class="stringliteral">&#39;ur&#39;</span>, <span class="stringliteral">&#39;f.entity_id = ur.uid&#39;</span>);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;role&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="stringliteral">&#39;ur.rid = r.rid&#39;</span>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;f.&#39;</span> . $criteria . <span class="stringliteral">&#39;_value&#39;</span>, $value);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;entity_type&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;r.name&#39;</span>, $role);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  $result = $query-&gt;countQuery()</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    -&gt;execute()</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    -&gt;fetchField();</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;}</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"><a class="line" href="bf__core_8module.html#af3ed54e5e3a4305a61b7591395c98d90"> 1395</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#af3ed54e5e3a4305a61b7591395c98d90">bf_core_count_members_with_a_criteria_commitee</a>($criteria = <span class="stringliteral">&#39;field_sex&#39;</span>, $value = NULL,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                                                        $role = <span class="stringliteral">&#39;Participant&#39;</span>, $commitee_id = NULL, $invite = FALSE) {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  $query = db_select(<span class="stringliteral">&#39;field_data_&#39;</span> . $criteria, <span class="charliteral">&#39;f&#39;</span>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;users_roles&#39;</span>, <span class="stringliteral">&#39;ur&#39;</span>, <span class="stringliteral">&#39;f.entity_id = ur.uid&#39;</span>);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;role&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="stringliteral">&#39;ur.rid = r.rid&#39;</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_committee&#39;</span>, <span class="stringliteral">&#39;fd&#39;</span>, <span class="stringliteral">&#39;ur.uid=fd.entity_id&#39;</span>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;f.&#39;</span> . $criteria . <span class="stringliteral">&#39;_value&#39;</span>, $value);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;f.entity_type&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;fd.field_committee_target_id&#39;</span>, $commitee_id);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;fd.entity_type&#39;</span>, <span class="stringliteral">&#39;user&#39;</span>);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;r.name&#39;</span>, $role);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <span class="keywordflow">if</span> ($invite) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_invite&#39;</span>, <span class="charliteral">&#39;i&#39;</span>, <span class="stringliteral">&#39;i.entity_id = fd.entity_id&#39;</span>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    $query-&gt;condition(<span class="stringliteral">&#39;i.field_invite_value&#39;</span>, 1);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    $result = $query-&gt;countQuery()</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  }</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    $result = $query-&gt;countQuery()</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_invite&#39;</span>, <span class="charliteral">&#39;i&#39;</span>, <span class="stringliteral">&#39;i.entity_id = fd.entity_id&#39;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    $query-&gt;condition(<span class="stringliteral">&#39;i.field_invite_value&#39;</span>, 1);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    $result1 = $query-&gt;countQuery()</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      -&gt;execute()</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      -&gt;fetchField();</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span> ($result) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      $result = $result - $result1;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  }</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;}</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a53f3da1c19b14eed84f7df7cf7927994"> 1433</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a53f3da1c19b14eed84f7df7cf7927994">bf_core_field_widget_form_alter</a>(&amp;$element, &amp;$form_state, $context) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">if</span> (isset($element[<span class="stringliteral">&#39;#entity&#39;</span>]-&gt;type) &amp;&amp; $element[<span class="stringliteral">&#39;#entity&#39;</span>]-&gt;type == <span class="stringliteral">&#39;info_article&#39;</span>) {</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    $element[<span class="stringliteral">&#39;summary&#39;</span>][<span class="stringliteral">&#39;#wysiwyg&#39;</span>] = FALSE;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div>
<div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a65e7a0dc571be0167ecdbaa3e1c1ed6b"> 1442</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a65e7a0dc571be0167ecdbaa3e1c1ed6b">bf_core_form_info_article_node_form_alter</a>(&amp;$form, &amp;$form_state, $form_id) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  $lang = isset($form[<span class="stringliteral">&#39;language&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>]) ? $form[<span class="stringliteral">&#39;language&#39;</span>][<span class="stringliteral">&#39;#value&#39;</span>] : LANGUAGE_NONE;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  $form[<span class="stringliteral">&#39;body&#39;</span>][$lang][0][<span class="stringliteral">&#39;summary&#39;</span>][<span class="stringliteral">&#39;#required&#39;</span>] = TRUE;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a0ddd87267c7210ac6f4302467109b004"> 1450</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a0ddd87267c7210ac6f4302467109b004">bf_core_menu</a>() {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  $items[<span class="stringliteral">&#39;pollpic/%/%/%&#39;</span>] = array(</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="stringliteral">&#39;title&#39;</span>            =&gt; <span class="stringliteral">&#39;render pic&#39;</span>,</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="stringliteral">&#39;page callback&#39;</span>    =&gt; <span class="stringliteral">&#39;bf_poll_display_chart&#39;</span>,</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="stringliteral">&#39;page arguments&#39;</span>   =&gt; array(1, 2, 3),</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="stringliteral">&#39;access arguments&#39;</span> =&gt; array(<span class="stringliteral">&#39;access content&#39;</span>),</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="stringliteral">&#39;type&#39;</span>             =&gt; MENU_CALLBACK,</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  );</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  $items[<span class="stringliteral">&#39;is_user&#39;</span>] = array(</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="stringliteral">&#39;page callback&#39;</span>    =&gt; <span class="stringliteral">&#39;bf_core_is_user&#39;</span>,</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="stringliteral">&#39;access arguments&#39;</span> =&gt; array(<span class="stringliteral">&#39;access content&#39;</span>),</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="stringliteral">&#39;type&#39;</span>             =&gt; MENU_CALLBACK,</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  );</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  $items[<span class="stringliteral">&#39;admin/settings/main-menu-pages&#39;</span>] = array(</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="stringliteral">&#39;title&#39;</span>            =&gt; t(<span class="stringliteral">&#39;Main menu pages&#39;</span>),</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="stringliteral">&#39;page callback&#39;</span>    =&gt; <span class="stringliteral">&#39;drupal_get_form&#39;</span>,</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <span class="stringliteral">&#39;page arguments&#39;</span>   =&gt; array(<span class="stringliteral">&#39;bf_core_main_menu_pages_settings_form&#39;</span>),</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="stringliteral">&#39;access arguments&#39;</span> =&gt; array(<span class="stringliteral">&#39;access admin_menu&#39;</span>),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="stringliteral">&#39;type&#39;</span>             =&gt; MENU_CALLBACK,</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <span class="stringliteral">&#39;file&#39;</span>             =&gt; <span class="stringliteral">&#39;bf_core.main_menu_overrides.inc&#39;</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  );</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  $items[<span class="stringliteral">&#39;admin/settings/deutch-roles/neutral&#39;</span>] = array(</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="stringliteral">&#39;title&#39;</span>            =&gt; t(<span class="stringliteral">&#39;Role names neutral&quot;&#39;</span>),</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    <span class="stringliteral">&#39;page callback&#39;</span>    =&gt; <span class="stringliteral">&#39;drupal_get_form&#39;</span>,</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    <span class="stringliteral">&#39;page arguments&#39;</span>   =&gt; array(<span class="stringliteral">&#39;bf_core_deutch_roles_edit_form&#39;</span>),</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="stringliteral">&#39;access arguments&#39;</span> =&gt; array(<span class="stringliteral">&#39;administer access control&#39;</span>),</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="stringliteral">&#39;file&#39;</span>             =&gt; <span class="stringliteral">&#39;bf_core.deutch_roles.inc&#39;</span>,</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="stringliteral">&#39;type&#39;</span>             =&gt; MENU_CALLBACK,</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  );</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  $items[<span class="stringliteral">&#39;admin/settings/deutch-roles/feminine&#39;</span>] = array(</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    <span class="stringliteral">&#39;title&#39;</span>            =&gt; t(<span class="stringliteral">&#39;Role names feminine&#39;</span>),</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="stringliteral">&#39;page callback&#39;</span>    =&gt; <span class="stringliteral">&#39;drupal_get_form&#39;</span>,</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="stringliteral">&#39;page arguments&#39;</span>   =&gt; array(<span class="stringliteral">&#39;bf_core_deutch_roles_edit_form&#39;</span>),</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="stringliteral">&#39;access arguments&#39;</span> =&gt; array(<span class="stringliteral">&#39;administer access control&#39;</span>),</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="stringliteral">&#39;file&#39;</span>             =&gt; <span class="stringliteral">&#39;bf_core.deutch_roles.inc&#39;</span>,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="stringliteral">&#39;type&#39;</span>             =&gt; MENU_CALLBACK,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  );</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="keywordflow">return</span> $items;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;}</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div>
<div class="line"><a name="l01493"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a5aa8f3ba24759d51b757bffe78e96319"> 1493</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a5aa8f3ba24759d51b757bffe78e96319">bf_core_is_user</a>() {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  global $user;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  print $user-&gt;uid;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  exit;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div>
<div class="line"><a name="l01499"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a13960db70656579984f9b8c1913b44aa"> 1499</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a13960db70656579984f9b8c1913b44aa">bf_core_menu_local_tasks_alter</a>(&amp;$data) {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <span class="keywordflow">if</span> (!empty($data[<span class="stringliteral">&#39;tabs&#39;</span>])) {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keywordflow">if</span> (isset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0])) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">foreach</span> ($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>] as $key =&gt; $value) {</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        <span class="keywordflow">if</span> ($value[<span class="stringliteral">&#39;#link&#39;</span>][<span class="stringliteral">&#39;path&#39;</span>] == <span class="stringliteral">&#39;node/%/revisions&#39;</span>) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;          unset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>][$key]);</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        }</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="keywordflow">if</span> ($value[<span class="stringliteral">&#39;#link&#39;</span>][<span class="stringliteral">&#39;path&#39;</span>] == <span class="stringliteral">&#39;admin/structure/taxonomy/%/fields&#39;</span>) {</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;          unset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>][$key]);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        }</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <span class="keywordflow">if</span> ($value[<span class="stringliteral">&#39;#link&#39;</span>][<span class="stringliteral">&#39;path&#39;</span>] == <span class="stringliteral">&#39;admin/structure/taxonomy/%/display&#39;</span>) {</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;          unset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>][$key]);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        }</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">if</span> ($value[<span class="stringliteral">&#39;#link&#39;</span>][<span class="stringliteral">&#39;path&#39;</span>] == <span class="stringliteral">&#39;admin/structure/taxonomy/%/translate&#39;</span>) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;          unset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>][$key]);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">if</span> ($value[<span class="stringliteral">&#39;#link&#39;</span>][<span class="stringliteral">&#39;path&#39;</span>] == <span class="stringliteral">&#39;admin/structure/taxonomy/%/edit&#39;</span>) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;          unset($data[<span class="stringliteral">&#39;tabs&#39;</span>][0][<span class="stringliteral">&#39;output&#39;</span>][$key]);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      }</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;}</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div>
<div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aed43468da26ef068af9243d0170fdd89"> 1526</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aed43468da26ef068af9243d0170fdd89">bf_core_form_system_site_information_settings_alter</a>(&amp;$form, &amp;$form_state, $form_id) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  <span class="comment">//get list of phase</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  $query = db_select(<span class="stringliteral">&#39;taxonomy_term_data&#39;</span>, <span class="charliteral">&#39;t&#39;</span>);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;taxonomy_vocabulary&#39;</span>, <span class="charliteral">&#39;v&#39;</span>, <span class="stringliteral">&#39;v.vid = t.vid&#39;</span>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;v.name&#39;</span>, <span class="stringliteral">&#39;Phase&#39;</span>);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  $query-&gt;fields(<span class="charliteral">&#39;t&#39;</span>, array(<span class="stringliteral">&#39;tid&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>));</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  $phases = $query-&gt;execute()-&gt;fetchAllKeyed();</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">foreach</span> ($phases as $key =&gt; $phase) {</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    $phases[$key] = t($phase);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>] = array(</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>  =&gt; <span class="stringliteral">&#39;fieldset&#39;</span>,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="stringliteral">&#39;#title&#39;</span> =&gt; t(<span class="stringliteral">&#39;Phase&#39;</span>),</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  );</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_name&#39;</span>] = array(</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Name&#39;</span>),</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;bf_forum_phase&#39;</span>),</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="stringliteral">&#39;#options&#39;</span>       =&gt; $phases,</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  );</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  $form[<span class="stringliteral">&#39;bf_phase_fieldset&#39;</span>][<span class="stringliteral">&#39;bf_phase_date&#39;</span>] = array(</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;date_popup&#39;</span>,</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;bf_forum_phase_end&#39;</span>),</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  );</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  $form[<span class="stringliteral">&#39;contact_form_info&#39;</span>] = array(</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Contact ste form info text&#39;</span>),</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;text_format&#39;</span>,</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;contact_site_form_info&#39;</span>, <span class="stringliteral">&#39;&#39;</span>),</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="stringliteral">&#39;#format&#39;</span>        =&gt; <span class="stringliteral">&#39;full_html&#39;</span>,</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  );</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  $form[<span class="stringliteral">&#39;comment_close_info&#39;</span>] = array(</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Comment close info text&#39;</span>),</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;text_format&#39;</span>,</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; variable_get(<span class="stringliteral">&#39;bf_comment_close_text&#39;</span>, <span class="stringliteral">&#39;&#39;</span>),</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="stringliteral">&#39;#format&#39;</span>        =&gt; <span class="stringliteral">&#39;full_html&#39;</span>,</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  );</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_system_site_phase_submit&#39;</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;}</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div>
<div class="line"><a name="l01576"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a9f9e4faaf291073496e4ccabfc4e6754"> 1576</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a9f9e4faaf291073496e4ccabfc4e6754">bf_core_admin_paths_alter</a>(&amp;$paths) {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <span class="keywordflow">if</span> ($paths[<span class="stringliteral">&#39;admin&#39;</span>]) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    ctools_add_css(<span class="stringliteral">&#39;responsive_admin_menu&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>, <span class="stringliteral">&#39;css&#39;</span>);</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  }</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;}</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;</div>
<div class="line"><a name="l01585"></a><span class="lineno"><a class="line" href="bf__core_8module.html#adc1436189e0c3184f8ab1b816962494f"> 1585</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#adc1436189e0c3184f8ab1b816962494f">bf_core_system_site_phase_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  $phase = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;bf_phase_name&#39;</span>];</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  $phase_end = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;bf_phase_date&#39;</span>];</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  $contact_form_info = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;contact_form_info&#39;</span>][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  $comment_close_info = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;comment_close_info&#39;</span>][<span class="stringliteral">&#39;value&#39;</span>];</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  variable_set(<span class="stringliteral">&#39;bf_forum_phase&#39;</span>, $phase);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  variable_set(<span class="stringliteral">&#39;bf_forum_phase_end&#39;</span>, $phase_end);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  variable_set(<span class="stringliteral">&#39;contact_site_form_info&#39;</span>, $contact_form_info);</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  variable_set(<span class="stringliteral">&#39;bf_comment_close_text&#39;</span>, $comment_close_info);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// get proposals.</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  $query = db_select(<span class="stringliteral">&#39;node&#39;</span>, <span class="charliteral">&#39;n&#39;</span>);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  $query-&gt;leftJoin(<span class="stringliteral">&#39;field_data_field_phase&#39;</span>, <span class="charliteral">&#39;p&#39;</span>, <span class="stringliteral">&#39;p.entity_id = n.nid&#39;</span>);</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  $query-&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, <span class="stringliteral">&#39;proposal&#39;</span>);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  $query-&gt;fields(<span class="charliteral">&#39;n&#39;</span>, array(<span class="stringliteral">&#39;nid&#39;</span>));</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  $query-&gt;fields(<span class="charliteral">&#39;p&#39;</span>, array(<span class="stringliteral">&#39;field_phase_tid&#39;</span>));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  $proposals = $query-&gt;execute()-&gt;fetchAllKeyed();</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">if</span> (count($proposals)) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">foreach</span> ($proposals as $nid =&gt; $tid) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      $node = node_load($nid);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      $node-&gt;field_phase[LANGUAGE_NONE][0][<span class="stringliteral">&#39;tid&#39;</span>] = $phase;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      $node-&gt;field_phase_end[LANGUAGE_NONE][0][<span class="stringliteral">&#39;value&#39;</span>] = date(<span class="stringliteral">&#39;Y-m-d H:i:s&#39;</span>, strtotime($phase_end));</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      node_save($node);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  }</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div>
<div class="line"><a name="l01616"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a2ff9eaa08ad2f1ea99b3e06cd6e14db1"> 1616</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a2ff9eaa08ad2f1ea99b3e06cd6e14db1">bf_core_form_contact_site_form_alter</a>(&amp;$form, $form_state, $form_id) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  $form[<span class="stringliteral">&#39;info&#39;</span>] = array(</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="stringliteral">&#39;#weight&#39;</span> =&gt; -7,</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="stringliteral">&#39;#markup&#39;</span> =&gt; <span class="stringliteral">&#39;&lt;div class=&quot;contact-site-form-info&quot;&gt;&#39;</span> . variable_get(<span class="stringliteral">&#39;contact_site_form_info&#39;</span>, <span class="stringliteral">&#39;&#39;</span>) . <span class="stringliteral">&#39;&lt;/div&gt;&#39;</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  );</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  $form[<span class="stringliteral">&#39;phone&#39;</span>] = array(</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="stringliteral">&#39;#title&#39;</span>         =&gt; t(<span class="stringliteral">&#39;Phone&#39;</span>),</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;textfield&#39;</span>,</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  );</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  $form[<span class="stringliteral">&#39;#validate&#39;</span>][] = <span class="stringliteral">&#39;bf_core_contact_site_form_validate&#39;</span>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_contact_personal_form_submit&#39;</span>;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;}</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div>
<div class="line"><a name="l01634"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a49bb76f403864c4f33862f8775e29f6d"> 1634</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a49bb76f403864c4f33862f8775e29f6d">bf_core_contact_site_form_validate</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">if</span> (!empty($form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;phone&#39;</span>])) {</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    drupal_goto(<span class="stringliteral">&#39;&lt;front&gt;&#39;</span>);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    exit;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;}</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;</div>
<div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a2da6d8e738fb913e651a77927943f778"> 1644</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a2da6d8e738fb913e651a77927943f778">bf_core_info_article_exposed_form</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>])) {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    $sort_by_value = $_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>];</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  }</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    $sort_by_value = <span class="stringliteral">&#39;field_date_of_publication_value&#39;</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    $_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>] = <span class="stringliteral">&#39;field_date_of_publication_value&#39;</span>;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  }</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>])) {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    $sort_order_value = $_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>];</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  }</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    $sort_order_value = <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    $_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>] = <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  }</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  $form[<span class="stringliteral">&#39;sort_by_article&#39;</span>] = array(</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; $sort_by_value,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="stringliteral">&#39;#options&#39;</span>       =&gt; array(</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="stringliteral">&#39;field_date_of_publication_value&#39;</span> =&gt; t(<span class="stringliteral">&#39;Date of publication&#39;</span>),</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="stringliteral">&#39;value&#39;</span>                           =&gt; t(<span class="stringliteral">&#39;Recommendations&#39;</span>)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    ),</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  );</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  $form[<span class="stringliteral">&#39;sort_order_article&#39;</span>] = array(</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>          =&gt; <span class="stringliteral">&#39;select&#39;</span>,</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="stringliteral">&#39;#default_value&#39;</span> =&gt; $sort_order_value,</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="stringliteral">&#39;#options&#39;</span>       =&gt; array(</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="stringliteral">&#39;ASC&#39;</span>  =&gt; t(<span class="stringliteral">&#39;Asc&#39;</span>),</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="stringliteral">&#39;DESC&#39;</span> =&gt; t(<span class="stringliteral">&#39;Desc&#39;</span>)</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    ),</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  );</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  $form[<span class="stringliteral">&#39;submit&#39;</span>] = array(</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="stringliteral">&#39;#type&#39;</span>  =&gt; <span class="stringliteral">&#39;submit&#39;</span>,</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="stringliteral">&#39;#value&#39;</span> =&gt; t(<span class="stringliteral">&#39;Apply&#39;</span>),</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  );</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  $form[<span class="stringliteral">&#39;#submit&#39;</span>][] = <span class="stringliteral">&#39;bf_core_info_article_exposed_form_submit&#39;</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="keywordflow">return</span> $form;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;}</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div>
<div class="line"><a name="l01686"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a451a5a4bff9329cb3e0f6dc8c3eed7dc"> 1686</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a451a5a4bff9329cb3e0f6dc8c3eed7dc">bf_core_info_article_exposed_form_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  $_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>] = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;sort_by_article&#39;</span>];</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  $_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>] = $form_state[<span class="stringliteral">&#39;values&#39;</span>][<span class="stringliteral">&#39;sort_order_article&#39;</span>];</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01694"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a6aaf4d2770241be4a4cf9eda1abebfc4"> 1694</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a6aaf4d2770241be4a4cf9eda1abebfc4">bf_core_views_query_alter</a>(&amp;$view, &amp;$query) {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> ($view-&gt;name == <span class="stringliteral">&#39;bf_members&#39;</span> &amp;&amp; $view-&gt;current_display == <span class="stringliteral">&#39;block&#39;</span>) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    $editorField = <span class="stringliteral">&#39;field_editors_users__field_data_field_editors.field_editors_target_id&#39;</span>;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    $roleField = <span class="stringliteral">&#39;users_roles.rid&#39;</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordflow">if</span> (is_numeric($view-&gt;exposed_raw_input[<span class="stringliteral">&#39;rid&#39;</span>]) &amp;&amp; $view-&gt;exposed_raw_input[<span class="stringliteral">&#39;rid&#39;</span>] == 0) {</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      <a class="code" href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c">bf_core_views_where_param_set</a>($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>], $roleField, <span class="stringliteral">&#39;!=&#39;</span>);</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <a class="code" href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c">bf_core_views_where_param_set</a>($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>], $editorField, <span class="stringliteral">&#39;IS NOT NULL&#39;</span>);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <a class="code" href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c">bf_core_views_where_param_set</a>($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>], $editorField, <span class="stringliteral">&#39;unset&#39;</span>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  }</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <span class="keywordflow">if</span> ($view-&gt;name == <span class="stringliteral">&quot;users&quot;</span> &amp;&amp; $view-&gt;current_display == <span class="stringliteral">&#39;page&#39;</span>) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <span class="keywordflow">if</span> ($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>][0][<span class="stringliteral">&#39;value&#39;</span>] == 0 &amp;&amp; $query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>][0][<span class="stringliteral">&#39;field&#39;</span>] == <span class="stringliteral">&#39;users_roles.rid&#39;</span>) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      $query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>][0][<span class="stringliteral">&#39;operator&#39;</span>] = <span class="stringliteral">&#39;!=&#39;</span>;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      $query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>][1][<span class="stringliteral">&#39;operator&#39;</span>] = <span class="stringliteral">&#39;IS NOT NULL&#39;</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordflow">foreach</span> ($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>] as $key =&gt; $condition) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">if</span> ($condition[<span class="stringliteral">&#39;field&#39;</span>] == <span class="stringliteral">&#39;field_editors_users__field_data_field_committee.field_committee_target_id&#39;</span>) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;          unset($query-&gt;where[1][<span class="stringliteral">&#39;conditions&#39;</span>][$key]);</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      }</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    }</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div>
<div class="line"><a name="l01725"></a><span class="lineno"><a class="line" href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c"> 1725</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c">bf_core_views_where_param_set</a>(&amp;$where_list, $param_name, $operator = <span class="stringliteral">&#39;unset&#39;</span>, $value = 0) {</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  $checkExists = FALSE;</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">foreach</span> ($where_list as $id =&gt; $condition) {</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span> ($condition[<span class="stringliteral">&#39;field&#39;</span>] == $param_name) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <span class="keywordflow">if</span> ($operator == <span class="stringliteral">&#39;unset&#39;</span>) {</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        unset($where_list[$id]);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      elseif ($operator != <span class="stringliteral">&#39;exist&#39;</span>) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        $where_list[$id][<span class="stringliteral">&#39;operator&#39;</span>] = $operator;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      }</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <span class="keywordflow">if</span> ($value) {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        $where_list[$id][<span class="stringliteral">&#39;value&#39;</span>] = $value;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      $checkExists = TRUE;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    }</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;  }</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="keywordflow">return</span> $checkExists;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div>
<div class="line"><a name="l01747"></a><span class="lineno"><a class="line" href="bf__core_8module.html#afa75f7b51ccca7a6f271cefa83e83e01"> 1747</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#afa75f7b51ccca7a6f271cefa83e83e01">bf_core_views_api</a>() {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <span class="stringliteral">&#39;api&#39;</span>           =&gt; 3,</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="stringliteral">&#39;path&#39;</span>          =&gt; drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/views&#39;</span>,</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="stringliteral">&#39;template path&#39;</span> =&gt; drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/views&#39;</span>,</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  );</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;}</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div>
<div class="line"><a name="l01758"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a5c43c632ee33be990675410726c4ddae"> 1758</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a5c43c632ee33be990675410726c4ddae">bf_core_query_alter</a>(QueryAlterableInterface $query) {</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  $is_search = FALSE;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="keywordflow">foreach</span> ($query-&gt;getTables() as $table) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">if</span> ($table[<span class="stringliteral">&#39;table&#39;</span>] == <span class="stringliteral">&#39;search_index&#39;</span>) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      $is_search = TRUE;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    }</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  }</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="keywordflow">if</span> ($is_search) {</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    $db_or = db_or();</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>]) &amp;&amp; $_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>] != <span class="stringliteral">&#39;all&#39;</span>) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      $db_or-&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, $_SESSION[<span class="stringliteral">&#39;searchOptions&#39;</span>], <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      $query-&gt;condition($db_or);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      $db_or-&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, <span class="stringliteral">&#39;article&#39;</span>, <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      $db_or-&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, <span class="stringliteral">&#39;proposal&#39;</span>, <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      $db_or-&gt;condition(<span class="stringliteral">&#39;n.type&#39;</span>, <span class="stringliteral">&#39;page&#39;</span>, <span class="charliteral">&#39;=&#39;</span>);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="keywordflow">if</span> (isset($query-&gt;alterMetaData)) {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <span class="keywordflow">if</span> (isset($query-&gt;alterMetaData[<span class="stringliteral">&#39;view&#39;</span>])) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <span class="keywordflow">if</span> ($query-&gt;alterMetaData[<span class="stringliteral">&#39;view&#39;</span>]-&gt;name == <span class="stringliteral">&quot;bf_articles&quot;</span>) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="comment">//Get a list of all &#39;group by&#39; in the query</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        $sort =&amp; $query-&gt;getOrderBy();</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>]) &amp;&amp; isset($_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>])) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;          $sort_by = $_SESSION[<span class="stringliteral">&#39;sort_by_articles&#39;</span>];</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;          $sort_order = $_SESSION[<span class="stringliteral">&#39;sort_order_articles&#39;</span>];</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;          $sort_by = <span class="stringliteral">&#39;field_date_of_publication_value&#39;</span>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;          $sort_order = <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">if</span> ($sort_by == <span class="stringliteral">&#39;field_date_of_publication_value&#39;</span>) {</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;          <span class="keywordflow">if</span> (isset($sort[<span class="stringliteral">&#39;votingapi_cache_node_sum_value&#39;</span>])) {</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            unset($sort[<span class="stringliteral">&#39;votingapi_cache_node_sum_value&#39;</span>]);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;          }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;          $sort[<span class="stringliteral">&#39;field_data_field_date_of_publication_field_date_of_publicati&#39;</span>] = $sort_order;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;          <span class="keywordflow">if</span> (isset($sort[<span class="stringliteral">&#39;field_data_field_date_of_publication_field_date_of_publicati&#39;</span>])) {</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;            unset($sort[<span class="stringliteral">&#39;field_data_field_date_of_publication_field_date_of_publicati&#39;</span>]);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;          }</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;          $sort[<span class="stringliteral">&#39;votingapi_cache_node_sum_value&#39;</span>] = $sort_order;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        }</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  }</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;}</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div>
<div class="line"><a name="l01814"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aa9db920610da5619c3b7d3d1fd0c6ae3"> 1814</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aa9db920610da5619c3b7d3d1fd0c6ae3">bf_core_user_delete</a>($account) {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <span class="comment">//Get type of node</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  $query = db_select(<span class="stringliteral">&#39;field_revision_field_editors&#39;</span>, <span class="stringliteral">&#39;fe&#39;</span>)</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;fe.field_editors_target_id&#39;</span>, $account-&gt;uid);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  $query-&gt;fields(<span class="stringliteral">&#39;fe&#39;</span>, array(<span class="stringliteral">&#39;entity_id&#39;</span>, <span class="stringliteral">&#39;field_editors_target_id&#39;</span>));</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  $proposals = $query-&gt;execute()-&gt;fetchAllKeyed();</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="keywordflow">if</span> (!empty($proposals)) {</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">foreach</span> ($proposals as $nid =&gt; $uid) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      $node = node_load($nid);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      $field_editors = field_get_items(<span class="stringliteral">&#39;node&#39;</span>, $node, <span class="stringliteral">&#39;field_editors&#39;</span>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">foreach</span> ($field_editors as $fid =&gt; $field_editor) {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="keywordflow">if</span> ($field_editor[<span class="stringliteral">&#39;target_id&#39;</span>] == $uid) {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;          unset($node-&gt;field_editors[LANGUAGE_NONE][$fid]);</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;        }</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      }</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      node_save($node);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    }</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  }</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;}</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment"> * Function for get unique value then sort them.</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment"> * */</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a0671e96f09ab7160e02659d7432fe558"> 1838</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a0671e96f09ab7160e02659d7432fe558">bf_core_unique_sort_choice</a>($arrs, $id) {</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  $unique_arr = array();</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">foreach</span> ($arrs AS $arr) {</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <span class="keywordflow">if</span> (!in_array($arr[$id], $unique_arr)) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      $unique_arr[] = $arr[$id];</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    }</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  sort($unique_arr);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">return</span> $unique_arr;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;}</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div>
<div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="bf__core_8module.html#abca9c23fc1fe2779a8c5e6eb5a0c95a3"> 1853</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#abca9c23fc1fe2779a8c5e6eb5a0c95a3">bf_core_node_update_index</a>($node) {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">if</span> (isset($node-&gt;body[<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;safe_summary&#39;</span>])) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">return</span> $node-&gt;body[<span class="stringliteral">&#39;und&#39;</span>][0][<span class="stringliteral">&#39;safe_summary&#39;</span>];</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  }</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;}</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div>
<div class="line"><a name="l01866"></a><span class="lineno"><a class="line" href="bf__core_8module.html#abfe22facce245038c9d05fcceec8f049"> 1866</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#abfe22facce245038c9d05fcceec8f049">bf_core_contact_personal_form_submit</a>($form, &amp;$form_state) {</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  user_cookie_delete(<span class="stringliteral">&#39;name&#39;</span>);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  user_cookie_delete(<span class="stringliteral">&#39;mail&#39;</span>);</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;}</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="comment"> * Get count of active users.</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"><a class="line" href="bf__core_8module.html#a4d9bf82cc5fd6f15375102969f4c2c59"> 1874</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#a4d9bf82cc5fd6f15375102969f4c2c59">bf_core_get_active_users</a>() {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  $query = db_select(<span class="stringliteral">&#39;users&#39;</span>, <span class="charliteral">&#39;u&#39;</span>)</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    -&gt;condition(<span class="stringliteral">&#39;u.status&#39;</span>, 1);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  $query-&gt;addExpression(<span class="stringliteral">&#39;COUNT(*)&#39;</span>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  $count = $query-&gt;execute()-&gt;fetchField();</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;  <span class="keywordflow">return</span> $count;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment"> * Get gender role.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"><a class="line" href="bf__core_8module.html#aa7f8304495217cd7cfaaf10b4acdd863"> 1886</a></span>&#160;<span class="keyword">function</span> <a class="code" href="bf__core_8module.html#aa7f8304495217cd7cfaaf10b4acdd863">bf_core_get_gender_role</a>($rolesText = <span class="stringliteral">&#39;&#39;</span>, $gender = <span class="stringliteral">&#39;Male&#39;</span>, $neutral = FALSE) {</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  global $language;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  $outputRolesText = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  <span class="keywordflow">if</span> ($language-&gt;language == <span class="stringliteral">&#39;en&#39;</span> || $gender == <span class="stringliteral">&#39;Male&#39;</span>) {</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    $en_roles = array(</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      <span class="stringliteral">&#39;Admin&#39;</span>,</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="stringliteral">&#39;Manager&#39;</span>,</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="stringliteral">&#39;Participant&#39;</span>,</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="stringliteral">&#39;Member&#39;</span>,</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="stringliteral">&#39;Expert&#39;</span>,</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="stringliteral">&#39;Project coordinator&#39;</span>,</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="stringliteral">&#39;Editor&#39;</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    );</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    $roles_list = array(</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      t(<span class="stringliteral">&#39;Admin&#39;</span>),</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      t(<span class="stringliteral">&#39;Manager&#39;</span>),</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      t(<span class="stringliteral">&#39;Participant&#39;</span>),</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      t(<span class="stringliteral">&#39;Member&#39;</span>),</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      t(<span class="stringliteral">&#39;Expert&#39;</span>),</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      t(<span class="stringliteral">&#39;Project coordinator&#39;</span>),</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      t(<span class="stringliteral">&#39;Editor&#39;</span>)</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    );</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  }</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="keywordflow">if</span> ($neutral) {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      $path = drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/includes/deutch_roles/neutral.inc&#39;</span>;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    }</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      $path = drupal_get_path(<span class="stringliteral">&#39;module&#39;</span>, <span class="stringliteral">&#39;bf_core&#39;</span>) . <span class="stringliteral">&#39;/includes/deutch_roles/feminine.inc&#39;</span>;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    }</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="keywordflow">if</span> (file_exists($path)) {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      $roles_list = explode(<span class="stringliteral">&quot;\n&quot;</span>, file_get_contents($path));</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      $en_roles = array(</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        <span class="stringliteral">&#39;Admin&#39;</span>,</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="stringliteral">&#39;Manager&#39;</span>,</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="stringliteral">&#39;Participant&#39;</span>,</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="stringliteral">&#39;Member&#39;</span>,</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        <span class="stringliteral">&#39;Expert&#39;</span>,</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="stringliteral">&#39;Project coordinator&#39;</span>,</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="stringliteral">&#39;Editor&#39;</span>,</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="stringliteral">&#39;Redakteur für&#39;</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      );</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    }</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="comment">// Default deutch roles text.</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      $roles_list = array(</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <span class="stringliteral">&#39;Technische Administratorin&#39;</span>,</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <span class="stringliteral">&#39;Forum-Administratorin&#39;</span>,</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="stringliteral">&#39;Teilnehmerin&#39;</span>,</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="stringliteral">&#39;Teilnehmerin Auftaktwerkstatt&#39;</span>,</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <span class="stringliteral">&#39;Expertin&#39;</span>,</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="stringliteral">&#39;Projektkoordinatorin&#39;</span>,</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="stringliteral">&#39;Bürgerredakteurin&#39;</span>,</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="stringliteral">&#39;Redakteurin für&#39;</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      );</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  }</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  $outputRolesText = str_replace($en_roles, $roles_list, $rolesText);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="keywordflow">return</span> $outputRolesText;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div>
<div class="ttc" id="bf__core_8module_html_afa5f18641afabc035f8bd5e687be32bc"><div class="ttname"><a href="bf__core_8module.html#afa5f18641afabc035f8bd5e687be32bc">bf_core_info_article_form_validate</a></div><div class="ttdeci">bf_core_info_article_form_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01070">bf_core.module:1070</a></div></div>
<div class="ttc" id="bf__core_8module_html_a6b80a06128bdedec80666be3245f28da"><div class="ttname"><a href="bf__core_8module.html#a6b80a06128bdedec80666be3245f28da">bf_core_count_members_forum</a></div><div class="ttdeci">bf_core_count_members_forum($invite=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01340">bf_core.module:1340</a></div></div>
<div class="ttc" id="bf__core_8module_html_a555cd4f5c278d11afed392fff6ef9e4b"><div class="ttname"><a href="bf__core_8module.html#a555cd4f5c278d11afed392fff6ef9e4b">bf_core_advpoll_node_form_validate</a></div><div class="ttdeci">bf_core_advpoll_node_form_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00955">bf_core.module:955</a></div></div>
<div class="ttc" id="bf__register__form_8module_html_aa52ecb286339c0fa1a1c6e550e22adb2"><div class="ttname"><a href="bf__register__form_8module.html#aa52ecb286339c0fa1a1c6e550e22adb2">bf_register_form_fillinvite_freebase_places</a></div><div class="ttdeci">bf_register_form_fillinvite_freebase_places($committee_target_id, $nameParam='', $valueParam='', $titleParam='')</div><div class="ttdef"><b>Definition:</b> <a href="bf__register__form_8module_source.html#l01128">bf_register_form.module:1128</a></div></div>
<div class="ttc" id="bf__core_8module_html_a0ae91aeab43318691da4ce21b614df5d"><div class="ttname"><a href="bf__core_8module.html#a0ae91aeab43318691da4ce21b614df5d">bf_core_count_members_for_comitee</a></div><div class="ttdeci">bf_core_count_members_for_comitee($committee_target_id, $role= 'Participant', $invite=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01225">bf_core.module:1225</a></div></div>
<div class="ttc" id="bf__core_8module_html_aea64e5af597c360ea76b674d40a58dea"><div class="ttname"><a href="bf__core_8module.html#aea64e5af597c360ea76b674d40a58dea">bf_core_field_delete_form_submit</a></div><div class="ttdeci">bf_core_field_delete_form_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01062">bf_core.module:1062</a></div></div>
<div class="ttc" id="bf__core_8module_html_a42dd4449910d80a96c5d16d66208f603"><div class="ttname"><a href="bf__core_8module.html#a42dd4449910d80a96c5d16d66208f603">bf_core_block_info</a></div><div class="ttdeci">bf_core_block_info()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00153">bf_core.module:153</a></div></div>
<div class="ttc" id="bf__core_8module_html_a13960db70656579984f9b8c1913b44aa"><div class="ttname"><a href="bf__core_8module.html#a13960db70656579984f9b8c1913b44aa">bf_core_menu_local_tasks_alter</a></div><div class="ttdeci">bf_core_menu_local_tasks_alter(&amp;$data)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01499">bf_core.module:1499</a></div></div>
<div class="ttc" id="bf__core_8module_html_a47b4ca2bec6094393620199eae5a7f90"><div class="ttname"><a href="bf__core_8module.html#a47b4ca2bec6094393620199eae5a7f90">bf_core_display_name</a></div><div class="ttdeci">bf_core_display_name($user)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00319">bf_core.module:319</a></div></div>
<div class="ttc" id="bf__core_8module_html_a2ff9eaa08ad2f1ea99b3e06cd6e14db1"><div class="ttname"><a href="bf__core_8module.html#a2ff9eaa08ad2f1ea99b3e06cd6e14db1">bf_core_form_contact_site_form_alter</a></div><div class="ttdeci">bf_core_form_contact_site_form_alter(&amp;$form, $form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01616">bf_core.module:1616</a></div></div>
<div class="ttc" id="bf__access_8module_html_ac525a8975d48269f9344b59b1062f2c6"><div class="ttname"><a href="bf__access_8module.html#ac525a8975d48269f9344b59b1062f2c6">bf_access_admin_menu_access_check</a></div><div class="ttdeci">bf_access_admin_menu_access_check()</div><div class="ttdef"><b>Definition:</b> <a href="bf__access_8module_source.html#l00058">bf_access.module:58</a></div></div>
<div class="ttc" id="bf__core_8module_html_abb615107c94d9cecf1d6433bf9000d8a"><div class="ttname"><a href="bf__core_8module.html#abb615107c94d9cecf1d6433bf9000d8a">bf_core_field_edit_after_build</a></div><div class="ttdeci">bf_core_field_edit_after_build($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00570">bf_core.module:570</a></div></div>
<div class="ttc" id="bf__core_8module_html_a53669d1b5805caaa77df4bb556f231d9"><div class="ttname"><a href="bf__core_8module.html#a53669d1b5805caaa77df4bb556f231d9">bf_core_get_free_places_for_committee</a></div><div class="ttdeci">bf_core_get_free_places_for_committee($committee_target_id, $invite=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01321">bf_core.module:1321</a></div></div>
<div class="ttc" id="bf__core_8module_html_a480a139fdf1c1e4d3ed66310a097e265"><div class="ttname"><a href="bf__core_8module.html#a480a139fdf1c1e4d3ed66310a097e265">bf_core_users_picture</a></div><div class="ttdeci">bf_core_users_picture($user=NULL, $image_style= 'userpic', $url=FALSE, $size_default=array('width'=&gt; 30, 'height'=&gt; 30))</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00276">bf_core.module:276</a></div></div>
<div class="ttc" id="bf__core_8module_html_abca9c23fc1fe2779a8c5e6eb5a0c95a3"><div class="ttname"><a href="bf__core_8module.html#abca9c23fc1fe2779a8c5e6eb5a0c95a3">bf_core_node_update_index</a></div><div class="ttdeci">bf_core_node_update_index($node)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01853">bf_core.module:1853</a></div></div>
<div class="ttc" id="proposal__wordlimiter_8js_html_af1ef45944c885a1f1d2126883bda988d"><div class="ttname"><a href="proposal__wordlimiter_8js.html#af1ef45944c885a1f1d2126883bda988d">strip_tags</a></div><div class="ttdeci">ml strip_tags</div><div class="ttdef"><b>Definition:</b> <a href="proposal__wordlimiter_8js_source.html#l00187">proposal_wordlimiter.js:187</a></div></div>
<div class="ttc" id="bf__core_8module_html_aafc4a7f126a807ea353f85c91c727efb"><div class="ttname"><a href="bf__core_8module.html#aafc4a7f126a807ea353f85c91c727efb">bf_core_login_submit</a></div><div class="ttdeci">bf_core_login_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01198">bf_core.module:1198</a></div></div>
<div class="ttc" id="bf__core_8module_html_ae560750f0d0dd3bdfa45f196072c687d"><div class="ttname"><a href="bf__core_8module.html#ae560750f0d0dd3bdfa45f196072c687d">bf_core_form_user_register_form_alter</a></div><div class="ttdeci">bf_core_form_user_register_form_alter(&amp;$form, $form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00332">bf_core.module:332</a></div></div>
<div class="ttc" id="bf__core_8module_html_a53f3da1c19b14eed84f7df7cf7927994"><div class="ttname"><a href="bf__core_8module.html#a53f3da1c19b14eed84f7df7cf7927994">bf_core_field_widget_form_alter</a></div><div class="ttdeci">bf_core_field_widget_form_alter(&amp;$element, &amp;$form_state, $context)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01433">bf_core.module:1433</a></div></div>
<div class="ttc" id="bf__image__fields_8tpl_8php_html_ad1dd99428259c243b107829ddc9beea0"><div class="ttname"><a href="bf__image__fields_8tpl_8php.html#ad1dd99428259c243b107829ddc9beea0">$image</a></div><div class="ttdeci">print $image</div><div class="ttdef"><b>Definition:</b> <a href="bf__image__fields_8tpl_8php_source.html#l00007">bf_image_fields.tpl.php:7</a></div></div>
<div class="ttc" id="bf__core_8module_html_a5aa8f3ba24759d51b757bffe78e96319"><div class="ttname"><a href="bf__core_8module.html#a5aa8f3ba24759d51b757bffe78e96319">bf_core_is_user</a></div><div class="ttdeci">bf_core_is_user()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01493">bf_core.module:1493</a></div></div>
<div class="ttc" id="bf__core_8module_html_a4d9bf82cc5fd6f15375102969f4c2c59"><div class="ttname"><a href="bf__core_8module.html#a4d9bf82cc5fd6f15375102969f4c2c59">bf_core_get_active_users</a></div><div class="ttdeci">bf_core_get_active_users()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01874">bf_core.module:1874</a></div></div>
<div class="ttc" id="bf__core_8module_html_a0671e96f09ab7160e02659d7432fe558"><div class="ttname"><a href="bf__core_8module.html#a0671e96f09ab7160e02659d7432fe558">bf_core_unique_sort_choice</a></div><div class="ttdeci">bf_core_unique_sort_choice($arrs, $id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01838">bf_core.module:1838</a></div></div>
<div class="ttc" id="bf__core_8module_html_a5cb68e8c642647752c816a769f73ebd6"><div class="ttname"><a href="bf__core_8module.html#a5cb68e8c642647752c816a769f73ebd6">bf_core_form_views_exposed_form_alter</a></div><div class="ttdeci">bf_core_form_views_exposed_form_alter(&amp;$form, $form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00396">bf_core.module:396</a></div></div>
<div class="ttc" id="bf__core_8module_html_a7f09118da430f1818eb45e9831586b9d"><div class="ttname"><a href="bf__core_8module.html#a7f09118da430f1818eb45e9831586b9d">bf_core_form_user_profile_form_alter</a></div><div class="ttdeci">bf_core_form_user_profile_form_alter(&amp;$form, $form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00339">bf_core.module:339</a></div></div>
<div class="ttc" id="bf__core_8module_html_a9a5eede5ea71cc3b88b3d8b8e52beccb"><div class="ttname"><a href="bf__core_8module.html#a9a5eede5ea71cc3b88b3d8b8e52beccb">bf_core_places_for_committee</a></div><div class="ttdeci">bf_core_places_for_committee()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01261">bf_core.module:1261</a></div></div>
<div class="ttc" id="bf__core_8module_html_a5680746980f87e12d9c9301ddeec0db0"><div class="ttname"><a href="bf__core_8module.html#a5680746980f87e12d9c9301ddeec0db0">bf_core_preprocess_user_badge</a></div><div class="ttdeci">bf_core_preprocess_user_badge(&amp;$vars)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00231">bf_core.module:231</a></div></div>
<div class="ttc" id="bf__core_8module_html_adcaea6890cc48077e1ab76fab78854e9"><div class="ttname"><a href="bf__core_8module.html#adcaea6890cc48077e1ab76fab78854e9">bf_core_ctools_plugin_directory</a></div><div class="ttdeci">bf_core_ctools_plugin_directory($owner, $plugin_type)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00039">bf_core.module:39</a></div></div>
<div class="ttc" id="bf__core_8module_html_aed43468da26ef068af9243d0170fdd89"><div class="ttname"><a href="bf__core_8module.html#aed43468da26ef068af9243d0170fdd89">bf_core_form_system_site_information_settings_alter</a></div><div class="ttdeci">bf_core_form_system_site_information_settings_alter(&amp;$form, &amp;$form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01526">bf_core.module:1526</a></div></div>
<div class="ttc" id="bf__core_8module_html_a968a1ada95db37df7ba107117f52f255"><div class="ttname"><a href="bf__core_8module.html#a968a1ada95db37df7ba107117f52f255">bf_core_block_view</a></div><div class="ttdeci">bf_core_block_view($delta= '')</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00164">bf_core.module:164</a></div></div>
<div class="ttc" id="bf__core_8module_html_aba766c0e86d820daffdfd4902a1d79a1"><div class="ttname"><a href="bf__core_8module.html#aba766c0e86d820daffdfd4902a1d79a1">bf_core_secureshare_pre_render</a></div><div class="ttdeci">bf_core_secureshare_pre_render($element)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00540">bf_core.module:540</a></div></div>
<div class="ttc" id="bf__poll_8inc_html_afe83293ec9cbbcf10051b37536c89f31"><div class="ttname"><a href="bf__poll_8inc.html#afe83293ec9cbbcf10051b37536c89f31">bf_poll_update_poll_bar</a></div><div class="ttdeci">bf_poll_update_poll_bar($node, $plot_path, $plot_uri, $chart_width, $chart_height, $sendChoice=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="bf__poll_8inc_source.html#l00264">bf_poll.inc:264</a></div></div>
<div class="ttc" id="bf__core_8module_html_a9f9e4faaf291073496e4ccabfc4e6754"><div class="ttname"><a href="bf__core_8module.html#a9f9e4faaf291073496e4ccabfc4e6754">bf_core_admin_paths_alter</a></div><div class="ttdeci">bf_core_admin_paths_alter(&amp;$paths)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01576">bf_core.module:1576</a></div></div>
<div class="ttc" id="bf__core_8module_html_a4f15db142a3678b5e4ad4a6918f4e951"><div class="ttname"><a href="bf__core_8module.html#a4f15db142a3678b5e4ad4a6918f4e951">bf_core_owlcarousel_settings_alter</a></div><div class="ttdeci">bf_core_owlcarousel_settings_alter(&amp;$settings, $instance)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00026">bf_core.module:26</a></div></div>
<div class="ttc" id="bf__core_8module_html_a0ddd87267c7210ac6f4302467109b004"><div class="ttname"><a href="bf__core_8module.html#a0ddd87267c7210ac6f4302467109b004">bf_core_menu</a></div><div class="ttdeci">bf_core_menu()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01450">bf_core.module:1450</a></div></div>
<div class="ttc" id="bf__poll_8inc_html_a3d811a0efaef409c305ad0becc6215a0"><div class="ttname"><a href="bf__poll_8inc.html#a3d811a0efaef409c305ad0becc6215a0">bf_poll_update_bar</a></div><div class="ttdeci">bf_poll_update_bar($node, $plot_path, $plot_uri, $chart_width, $chart_height, $sendChoice=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="bf__poll_8inc_source.html#l00103">bf_poll.inc:103</a></div></div>
<div class="ttc" id="bf__core_8module_html_af7718404f7acb5073808582dfdc7894e"><div class="ttname"><a href="bf__core_8module.html#af7718404f7acb5073808582dfdc7894e">bf_core_comitee_list</a></div><div class="ttdeci">bf_core_comitee_list($description=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01355">bf_core.module:1355</a></div></div>
<div class="ttc" id="bf__core_8module_html_af1936e03a6f41ded8b081645e9d18470"><div class="ttname"><a href="bf__core_8module.html#af1936e03a6f41ded8b081645e9d18470">bf_core_system_site_information_save_email</a></div><div class="ttdeci">bf_core_system_site_information_save_email($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01025">bf_core.module:1025</a></div></div>
<div class="ttc" id="bf__core_8module_html_aa7f8304495217cd7cfaaf10b4acdd863"><div class="ttname"><a href="bf__core_8module.html#aa7f8304495217cd7cfaaf10b4acdd863">bf_core_get_gender_role</a></div><div class="ttdeci">bf_core_get_gender_role($rolesText= '', $gender= 'Male', $neutral=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01886">bf_core.module:1886</a></div></div>
<div class="ttc" id="bf__core_8module_html_aaba40d02886d88f57d596c6259bb3be2"><div class="ttname"><a href="bf__core_8module.html#aaba40d02886d88f57d596c6259bb3be2">bf_core_preprocess_search_form</a></div><div class="ttdeci">bf_core_preprocess_search_form(&amp;$variables)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00208">bf_core.module:208</a></div></div>
<div class="ttc" id="bf__core_8module_html_afa75f7b51ccca7a6f271cefa83e83e01"><div class="ttname"><a href="bf__core_8module.html#afa75f7b51ccca7a6f271cefa83e83e01">bf_core_views_api</a></div><div class="ttdeci">bf_core_views_api()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01747">bf_core.module:1747</a></div></div>
<div class="ttc" id="bf__core_8module_html_abfe22facce245038c9d05fcceec8f049"><div class="ttname"><a href="bf__core_8module.html#abfe22facce245038c9d05fcceec8f049">bf_core_contact_personal_form_submit</a></div><div class="ttdeci">bf_core_contact_personal_form_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01866">bf_core.module:1866</a></div></div>
<div class="ttc" id="bf__core_8module_html_a2da6d8e738fb913e651a77927943f778"><div class="ttname"><a href="bf__core_8module.html#a2da6d8e738fb913e651a77927943f778">bf_core_info_article_exposed_form</a></div><div class="ttdeci">bf_core_info_article_exposed_form($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01644">bf_core.module:1644</a></div></div>
<div class="ttc" id="bf__core_8module_html_ad42d51ff11dd6983a7ace58557339f57"><div class="ttname"><a href="bf__core_8module.html#ad42d51ff11dd6983a7ace58557339f57">bf_core_init</a></div><div class="ttdeci">bf_core_init()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00486">bf_core.module:486</a></div></div>
<div class="ttc" id="bf__core_8module_html_a9e6fdd914e3118b549535733e5403ce1"><div class="ttname"><a href="bf__core_8module.html#a9e6fdd914e3118b549535733e5403ce1">bf_core_newsletter_after_build</a></div><div class="ttdeci">bf_core_newsletter_after_build($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00589">bf_core.module:589</a></div></div>
<div class="ttc" id="bf__core_8module_html_aa82a514e42d0a902af819ad9f92c69c5"><div class="ttname"><a href="bf__core_8module.html#aa82a514e42d0a902af819ad9f92c69c5">bf_core_after_build</a></div><div class="ttdeci">bf_core_after_build($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00551">bf_core.module:551</a></div></div>
<div class="ttc" id="bf__core_8module_html_a1835084aa249a366d1b7e476ba8d44d4"><div class="ttname"><a href="bf__core_8module.html#a1835084aa249a366d1b7e476ba8d44d4">OTHER_WORDLIMITER_FIELDS</a></div><div class="ttdeci">const OTHER_WORDLIMITER_FIELDS</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00010">bf_core.module:10</a></div></div>
<div class="ttc" id="bf__core_8module_html_a5c43c632ee33be990675410726c4ddae"><div class="ttname"><a href="bf__core_8module.html#a5c43c632ee33be990675410726c4ddae">bf_core_query_alter</a></div><div class="ttdeci">bf_core_query_alter(QueryAlterableInterface $query)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01758">bf_core.module:1758</a></div></div>
<div class="ttc" id="bf__core_8module_html_a786236bdf610226f5abbf27017cf57f0"><div class="ttname"><a href="bf__core_8module.html#a786236bdf610226f5abbf27017cf57f0">bf_core_login_validate</a></div><div class="ttdeci">bf_core_login_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01208">bf_core.module:1208</a></div></div>
<div class="ttc" id="bf__core_8module_html_a1e18706e69cccbe6143591bdbdc43a17"><div class="ttname"><a href="bf__core_8module.html#a1e18706e69cccbe6143591bdbdc43a17">poll_view_voting_ajax_submit</a></div><div class="ttdeci">poll_view_voting_ajax_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01110">bf_core.module:1110</a></div></div>
<div class="ttc" id="bf__core_8module_html_a6aaf4d2770241be4a4cf9eda1abebfc4"><div class="ttname"><a href="bf__core_8module.html#a6aaf4d2770241be4a4cf9eda1abebfc4">bf_core_views_query_alter</a></div><div class="ttdeci">bf_core_views_query_alter(&amp;$view, &amp;$query)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01694">bf_core.module:1694</a></div></div>
<div class="ttc" id="bf__invite_8module_html_afeb195878835ecf3fda1649942bfa890"><div class="ttname"><a href="bf__invite_8module.html#afeb195878835ecf3fda1649942bfa890">bf_invite_check_code</a></div><div class="ttdeci">bf_invite_check_code($code, $status=1)</div><div class="ttdef"><b>Definition:</b> <a href="bf__invite_8module_source.html#l00258">bf_invite.module:258</a></div></div>
<div class="ttc" id="bf__core_8module_html_ae334cd9278485fbdebc7fe475b1c17e5"><div class="ttname"><a href="bf__core_8module.html#ae334cd9278485fbdebc7fe475b1c17e5">bf_core_search_type_save</a></div><div class="ttdeci">bf_core_search_type_save($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01018">bf_core.module:1018</a></div></div>
<div class="ttc" id="bf__core_8module_html_a3f4ac92d34437bcb909fd975770c9a07"><div class="ttname"><a href="bf__core_8module.html#a3f4ac92d34437bcb909fd975770c9a07">bf_core_username_alter</a></div><div class="ttdeci">bf_core_username_alter(&amp;$name, $account)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00579">bf_core.module:579</a></div></div>
<div class="ttc" id="bf__core_8module_html_a35851d924f9ef2cf159e65e8a091a478"><div class="ttname"><a href="bf__core_8module.html#a35851d924f9ef2cf159e65e8a091a478">bf_core_process_rate_template_thumbs_up</a></div><div class="ttdeci">bf_core_process_rate_template_thumbs_up(&amp;$variables)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00056">bf_core.module:56</a></div></div>
<div class="ttc" id="bf__core_8module_html_a15bdf02c52eda35f32567fe2f64cc90f"><div class="ttname"><a href="bf__core_8module.html#a15bdf02c52eda35f32567fe2f64cc90f">bf_core_theme</a></div><div class="ttdeci">bf_core_theme()</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00184">bf_core.module:184</a></div></div>
<div class="ttc" id="bf__core_8module_html_a09225a1306c094350c7ed4f2cdcfd59d"><div class="ttname"><a href="bf__core_8module.html#a09225a1306c094350c7ed4f2cdcfd59d">bf_core_form_alter</a></div><div class="ttdeci">bf_core_form_alter(&amp;$form, &amp;$form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00598">bf_core.module:598</a></div></div>
<div class="ttc" id="bf__core_8module_html_a2523c880c02d049869bc1435a2371b6d"><div class="ttname"><a href="bf__core_8module.html#a2523c880c02d049869bc1435a2371b6d">poll_view_voting_submit</a></div><div class="ttdeci">poll_view_voting_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01118">bf_core.module:1118</a></div></div>
<div class="ttc" id="bf__core_8module_html_a65e7a0dc571be0167ecdbaa3e1c1ed6b"><div class="ttname"><a href="bf__core_8module.html#a65e7a0dc571be0167ecdbaa3e1c1ed6b">bf_core_form_info_article_node_form_alter</a></div><div class="ttdeci">bf_core_form_info_article_node_form_alter(&amp;$form, &amp;$form_state, $form_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01442">bf_core.module:1442</a></div></div>
<div class="ttc" id="bf__core_8module_html_a848b1975007fd423887e27ed76cd6da7"><div class="ttname"><a href="bf__core_8module.html#a848b1975007fd423887e27ed76cd6da7">bf_core_form_user_profile_form_validate</a></div><div class="ttdeci">bf_core_form_user_profile_form_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00347">bf_core.module:347</a></div></div>
<div class="ttc" id="bf__core_8module_html_adc1436189e0c3184f8ab1b816962494f"><div class="ttname"><a href="bf__core_8module.html#adc1436189e0c3184f8ab1b816962494f">bf_core_system_site_phase_submit</a></div><div class="ttdeci">bf_core_system_site_phase_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01585">bf_core.module:1585</a></div></div>
<div class="ttc" id="bf__core_8module_html_ae75bf1152f5d4ce928dd15556584b3df"><div class="ttname"><a href="bf__core_8module.html#ae75bf1152f5d4ce928dd15556584b3df">bf_core_user_login_final_validate</a></div><div class="ttdeci">bf_core_user_login_final_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00896">bf_core.module:896</a></div></div>
<div class="ttc" id="bf__core_8module_html_af3ed54e5e3a4305a61b7591395c98d90"><div class="ttname"><a href="bf__core_8module.html#af3ed54e5e3a4305a61b7591395c98d90">bf_core_count_members_with_a_criteria_commitee</a></div><div class="ttdeci">bf_core_count_members_with_a_criteria_commitee($criteria= 'field_sex', $value=NULL, $role= 'Participant', $commitee_id=NULL, $invite=FALSE)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01395">bf_core.module:1395</a></div></div>
<div class="ttc" id="bf__core_8module_html_a04c5192404da435c966ac8b28f8990dc"><div class="ttname"><a href="bf__core_8module.html#a04c5192404da435c966ac8b28f8990dc">bf_core_preprocess_field_multiple_value_form</a></div><div class="ttdeci">bf_core_preprocess_field_multiple_value_form(&amp;$variables)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01077">bf_core.module:1077</a></div></div>
<div class="ttc" id="bf__core_8module_html_ae7b433953d8f4f7ea6636c681bb923e4"><div class="ttname"><a href="bf__core_8module.html#ae7b433953d8f4f7ea6636c681bb923e4">bf_core_count_members_with_a_criteria</a></div><div class="ttdeci">bf_core_count_members_with_a_criteria($criteria= 'field_sex', $value=NULL, $role= 'Participant')</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01376">bf_core.module:1376</a></div></div>
<div class="ttc" id="bf__core_8module_html_a0e8b1f6bd32d88429bed566b55c14e62"><div class="ttname"><a href="bf__core_8module.html#a0e8b1f6bd32d88429bed566b55c14e62">bf_core_path_update</a></div><div class="ttdeci">bf_core_path_update($path)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00379">bf_core.module:379</a></div></div>
<div class="ttc" id="bf__core_8module_html_ada9ec93bb4c4ea2a83f11d918a43c77c"><div class="ttname"><a href="bf__core_8module.html#ada9ec93bb4c4ea2a83f11d918a43c77c">bf_core_form_user_profile_form_submit</a></div><div class="ttdeci">bf_core_form_user_profile_form_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00360">bf_core.module:360</a></div></div>
<div class="ttc" id="bf__core_8module_html_aa715a290dc9cf125d0e2d18f00e4d5f1"><div class="ttname"><a href="bf__core_8module.html#aa715a290dc9cf125d0e2d18f00e4d5f1">bf_core_build_user_details</a></div><div class="ttdeci">bf_core_build_user_details($user, $image_style= 'userpic30')</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00253">bf_core.module:253</a></div></div>
<div class="ttc" id="user__badge_8tpl_8php_html_abb12f8c31dba99f68efccffe9434082c"><div class="ttname"><a href="user__badge_8tpl_8php.html#abb12f8c31dba99f68efccffe9434082c">$picture</a></div><div class="ttdeci">print $picture</div><div class="ttdef"><b>Definition:</b> <a href="user__badge_8tpl_8php_source.html#l00021">user_badge.tpl.php:21</a></div></div>
<div class="ttc" id="bf__core_8module_html_a84903034352a31c393b06c332d3bfee6"><div class="ttname"><a href="bf__core_8module.html#a84903034352a31c393b06c332d3bfee6">bf_core_is_free_places_for_committee</a></div><div class="ttdeci">bf_core_is_free_places_for_committee($committee_target_id)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01289">bf_core.module:1289</a></div></div>
<div class="ttc" id="bf__core_8module_html_a4bc8bf3bd6e7fbd391fa9f5a8c74fc3a"><div class="ttname"><a href="bf__core_8module.html#a4bc8bf3bd6e7fbd391fa9f5a8c74fc3a">poll_view_voting_poll_submit</a></div><div class="ttdeci">poll_view_voting_poll_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01158">bf_core.module:1158</a></div></div>
<div class="ttc" id="bf__core_8module_html_a4b15fc4f38458e8849aef78c059f1e62"><div class="ttname"><a href="bf__core_8module.html#a4b15fc4f38458e8849aef78c059f1e62">bf_core_js_alter</a></div><div class="ttdeci">bf_core_js_alter(&amp;$javascript)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00048">bf_core.module:48</a></div></div>
<div class="ttc" id="bf__core_8module_html_ad46f9d1f373692eed11ff2d959d261bc"><div class="ttname"><a href="bf__core_8module.html#ad46f9d1f373692eed11ff2d959d261bc">bf_core_validate_proposal_wordlimiter</a></div><div class="ttdeci">bf_core_validate_proposal_wordlimiter($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00929">bf_core.module:929</a></div></div>
<div class="ttc" id="bf__core_8module_html_ad209d78747dbcc52cb312330e449e99c"><div class="ttname"><a href="bf__core_8module.html#ad209d78747dbcc52cb312330e449e99c">bf_core_views_where_param_set</a></div><div class="ttdeci">bf_core_views_where_param_set(&amp;$where_list, $param_name, $operator= 'unset', $value=0)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01725">bf_core.module:1725</a></div></div>
<div class="ttc" id="bf__core_8module_html_a88c154399c5e6a53410ebdb5e4013423"><div class="ttname"><a href="bf__core_8module.html#a88c154399c5e6a53410ebdb5e4013423">bf_core_date_popup_process_alter</a></div><div class="ttdeci">bf_core_date_popup_process_alter(&amp;$element, &amp;$form_state, $context)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01091">bf_core.module:1091</a></div></div>
<div class="ttc" id="bf__core_8module_html_a451a5a4bff9329cb3e0f6dc8c3eed7dc"><div class="ttname"><a href="bf__core_8module.html#a451a5a4bff9329cb3e0f6dc8c3eed7dc">bf_core_info_article_exposed_form_submit</a></div><div class="ttdeci">bf_core_info_article_exposed_form_submit($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01686">bf_core.module:1686</a></div></div>
<div class="ttc" id="bf__core_8module_html_a493619c6ac78f4ec87a1903163bdd816"><div class="ttname"><a href="bf__core_8module.html#a493619c6ac78f4ec87a1903163bdd816">bf_core_logo_settings_validate</a></div><div class="ttdeci">bf_core_logo_settings_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00966">bf_core.module:966</a></div></div>
<div class="ttc" id="bf__core_8module_html_aa9db920610da5619c3b7d3d1fd0c6ae3"><div class="ttname"><a href="bf__core_8module.html#aa9db920610da5619c3b7d3d1fd0c6ae3">bf_core_user_delete</a></div><div class="ttdeci">bf_core_user_delete($account)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01814">bf_core.module:1814</a></div></div>
<div class="ttc" id="bf__core_8module_html_a9ef8079930b84edf85e3e47f3d421c06"><div class="ttname"><a href="bf__core_8module.html#a9ef8079930b84edf85e3e47f3d421c06">bf_core_login_redirect</a></div><div class="ttdeci">bf_core_login_redirect($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l00372">bf_core.module:372</a></div></div>
<div class="ttc" id="bf__core_8module_html_abedc1d8990709b5be26d14d092b42b17"><div class="ttname"><a href="bf__core_8module.html#abedc1d8990709b5be26d14d092b42b17">bf_core_check_exist_chart</a></div><div class="ttdeci">bf_core_check_exist_chart($nid, $size)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01180">bf_core.module:1180</a></div></div>
<div class="ttc" id="bf__core_8module_html_a49bb76f403864c4f33862f8775e29f6d"><div class="ttname"><a href="bf__core_8module.html#a49bb76f403864c4f33862f8775e29f6d">bf_core_contact_site_form_validate</a></div><div class="ttdeci">bf_core_contact_site_form_validate($form, &amp;$form_state)</div><div class="ttdef"><b>Definition:</b> <a href="bf__core_8module_source.html#l01634">bf_core.module:1634</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_05e765d472ea2fc73e992743825b4b44.html">custom</a></li><li class="navelem"><a class="el" href="dir_29a8ed549483f1d5046a3f50ee80c557.html">bf_core</a></li><li class="navelem"><a class="el" href="bf__core_8module.html">bf_core.module</a></li>
    <li class="footer">Generated on Tue Jul 22 2014 15:48:29 for BF by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
